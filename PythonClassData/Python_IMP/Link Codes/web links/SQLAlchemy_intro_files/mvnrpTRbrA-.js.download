if (self.CavalryLogger) { CavalryLogger.start_js(["gO7Vs"]); }

__d("FBRTCMessageType",[],(function(a,b,c,d,e,f){e.exports={JOIN:0,SERVER_MEDIA_UPDATE:1,HANGUP:2,ICE_CANDIDATE:3,RING:4,DISMISS:5,CONFERENCE_STATE:6,ADD_PARTICIPANTS:7,SUBSCRIPTION:8,CLIENT_MEDIA_UPDATE:9,DATA_MESSAGE:10,REMOVE_PARTICIPANTS:11,EXPERIMENT:12,APPROVAL:17}}),null);
__d("AjaxError",[],(function(a,b,c,d,e,f){a={ERROR:"ar:error",TIMEOUT:"ar:timeout",PROXY_ERROR:"ar:proxy error",TRANSPORT_ERROR:"ar:transport error",SERVER_ERROR:"ar:http error",PARSE_ERROR:"ar:parse error",SERVICE_UNAVAILABLE:"ar:noservice"};e.exports=a}),null);
__d("AjaxRequest",["AjaxError","ErrorUtils","Keys","PHPQuerySerializer","TimeSlice","URI","UserAgent_DEPRECATED","ZeroRewrites","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){__p&&__p();var g=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest(),h=[];function a(){var a=h;h=[];a.forEach(function(a){return a.abort()})}function i(a){a.onJSON=a.onError=a.onSuccess=null,b("clearTimeout")(a._timer),a.xhr&&a.xhr.readyState<4&&(a.xhr.abort(),a.xhr=null),h=h.filter(function(b){return b&&b!=a&&b.xhr&&b.xhr.readyState<4})}function c(a,c,d){"use strict";this.timeout=6e4,this.streamMode=!0,this.prelude=/^for \(;;\);/,this.status=null,this.$1=-1,this.$2=null,this.$3=0,this.$4=null,this.json=null,this.errorType=null,this.errorText=null,this.onJSON=null,this.onSuccess=null,this.onError=null,c instanceof b("URI")||(c=new(b("URI"))(c)),this.xhr=b("ZeroRewrites").getTransportBuilderForURI(c)(),d&&a=="GET"&&c.setQueryData(d),this.method=a,this.uri=c,this.xhr.open(a,c)}c.supportsCORS=function(){"use strict";return g};c.prototype.send=function(a){"use strict";__p&&__p();var c=b("TimeSlice").getReusableContinuation("AjaxRequest xhr.onreadystatechange");this.xhr.onreadystatechange=function(){return this.$5(c)}.bind(this);var d=this.timeout;d&&(this.$2=b("setTimeoutAcrossTransitions")(function(){this.errorType=b("AjaxError").TIMEOUT,this.errorText="timeout",this.$4=Date.now()-this.$3,this.onError&&this.onError(this),i(this)}.bind(this),d));h.push(this);this.method=="POST"&&this.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");this.$3=Date.now();this.xhr.send(a?b("PHPQuerySerializer").serialize(a):"")};c.prototype.abort=function(){"use strict";i(this)};c.prototype.toString=function(){"use strict";var a="[AjaxRequest readyState="+this.xhr.readyState;this.errorType&&(a+=" errorType="+this.errorType,this.errorText&&(a+=" ("+this.errorText+")"));return a+"]"};c.prototype.toJSON=function(){"use strict";var a={};this.json&&(a.json=this.json);this.status&&(a.status=this.status);this.errorType&&(a.errorType=this.errorType,a.uri=this.uri);this.errorText&&(a.errorText=this.errorText);this.$4&&(a.time=this.$4);return a};c.prototype.onJSONSafe=function(){"use strict";this.onJSON&&this.onJSON(this)};c.prototype.onSuccessSafe=function(){"use strict";this.onSuccess&&this.onSuccess(this)};c.prototype.onErrorSafe=function(){"use strict";this.onError&&this.onError(this)};c.prototype.$6=function(){"use strict";__p&&__p();var a;try{this.status=this.xhr.status,a=this.xhr.statusText}catch(a){this.xhr.readyState>=4&&(this.errorType=b("AjaxError").TRANSPORT_ERROR,this.errorText=a.message);return}var c=this.status;if(c==null){this.errorType=b("AjaxError").ERROR;this.errorText="null status code";return}if(c===0&&!/^(file|ftp)/.test(this.uri.toString()))this.errorType=b("AjaxError").TRANSPORT_ERROR;else if(c>=100&&c<200)this.errorType=b("AjaxError").PROXY_ERROR;else if(c>=200&&c<300)return;else if(c>=300&&c<400)this.errorType=b("AjaxError").PROXY_ERROR;else if(c>=400&&c<500)this.errorType=b("AjaxError").SERVER_ERROR;else if(c===503)this.errorType=b("AjaxError").SERVICE_UNAVAILABLE;else if(c>500&&c<600)this.errorType=b("AjaxError").PROXY_ERROR;else if(c==1223)return;else c>=12001&&c<=12156?this.errorType=b("AjaxError").TRANSPORT_ERROR:(a="unrecognized status code: "+c,this.errorType=b("AjaxError").ERROR);this.errorText||(this.errorText=a)};c.prototype.$7=function(){"use strict";__p&&__p();var a,c=this.xhr.readyState;try{a=this.xhr.responseText||""}catch(a){c>=4&&(this.errorType=b("AjaxError").ERROR,this.errorText="responseText not available - "+a.message);return}while(this.xhr){var d=this.$1+1,e=this.streamMode?a.indexOf("\n",d):a.length;e<0&&c==4&&(e=a.length);if(e<=this.$1)break;var f=a;this.streamMode&&(f=a.substr(d,e-d).replace(/^\s*|\s*$/g,""));if(d===0&&this.prelude){var g=this.prelude;g.test(f)&&(f=f.replace(g,""))}this.$1=e;if(f){try{this.json=JSON.parse(f)}catch(c){g=a.match(/(<body[\S\s]+?<\/body>)/i);e=g!=null&&g.length>0?g[0]:null;g={message:c.message,"char":d,excerpt:(d===0&&e||f).substr(512)};this.errorType=b("AjaxError").PARSE_ERROR;this.errorText="parse error - "+JSON.stringify(g);return}b("ErrorUtils").applyWithGuard(this.onJSONSafe,this)}}};c.prototype.$5=function(a){"use strict";var b=this.xhr&&this.xhr.readyState||0;this.status==null&&b>=2&&this.$6();!this.errorType&&this.status!=null&&((b===3&&this.streamMode||b===4)&&a(function(){return this.$7()}.bind(this)));(this.errorType||b===4)&&(this.$4=Date.now()-this.$3,a.last(function(){this.errorType?this.onErrorSafe():this.onSuccessSafe(),i(this)}.bind(this)))};window.addEventListener&&b("UserAgent_DEPRECATED").firefox()&&window.addEventListener("keydown",function(event){event.keyCode===b("Keys").ESC&&event.prevent()},!1);window.attachEvent&&window.attachEvent("onunload",a);e.exports=c}),null);
__d("ChannelSubdomain",["Event","JSLogger","Run","LogHistory","clearTimeout","setTimeoutAcrossTransitions","WebStorage"],(function(a,b,c,d,e,f){__p&&__p();var g=b("LogHistory").getInstance("channel"),h=b("JSLogger").create("channel"),i="channel_sub:",j=7,k=100*1e3,l=null,m=null;function n(){var a=b("WebStorage").getLocalStorage();m&&(b("clearTimeout")(m),m=null);a&&l!=null&&a.removeItem(i+l);l=null}function a(a,c,d){__p&&__p();d===void 0&&(d=!1);a=(a-1)*j;d&&(m&&b("clearTimeout")(m),l=m=null);c==null&&(c=Math.floor(Math.random()*a));if(l==null){var e=b("WebStorage").getLocalStorage();if(e){d=[];for(var f=0;f<e.length;f++){var o=e.key(f);if(o!=null&&o.indexOf(i)===0){var p=parseInt(o.substr(i.length),10);d[p]=parseInt(e.getItem(o),10)}}p=Date.now()-k;for(var o=0;o<a;o++){f=(o+c)%a;if(!d[f]||d[f]<p){l=f;break}}if(l!=null){f=function a(){if(l==null)return;try{e.setItem(i+l,Date.now().toString())}catch(a){g.warn("subdomain set failed",a.message)}m=b("setTimeoutAcrossTransitions")(a,k/2)};f()}else g.warn("no channel subdomain",d),h.error("subdomain_overflow");typeof window.onpageshow!=="undefined"?b("Event").listen(window,"pagehide",n):b("Run").onUnload(n)}else l=c}return l==null?null:l%j}e.exports={allocate:a,clear:n}}),null);
__d("ChatproxyClientErrorsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:ChatproxyClientErrorsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:ChatproxyClientErrorsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:ChatproxyClientErrorsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAppVersion=function(a){this.$1.app_version=a;return this};a.prototype.setBatchSize=function(a){this.$1.batch_size=a;return this};a.prototype.setErrorMessage=function(a){this.$1.error_message=a;return this};a.prototype.setErrorReason=function(a){this.$1.error_reason=a;return this};a.prototype.setErrorText=function(a){this.$1.error_text=a;return this};a.prototype.setJsEventTimeMs=function(a){this.$1.js_event_time_ms=a;return this};a.prototype.setMultiViewSubscription=function(a){this.$1.multi_view_subscription=a;return this};a.prototype.setRequestID=function(a){this.$1.request_id=a;return this};a.prototype.setResponseHeaders=function(a){this.$1.response_headers=a;return this};a.prototype.setSessionID=function(a){this.$1.session_id=a;return this};a.prototype.setSessionIDStr=function(a){this.$1.session_id_str=a;return this};a.prototype.setStatusCode=function(a){this.$1.status_code=a;return this};a.prototype.setSubscriberID=function(a){this.$1.subscriber_id=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setTopicPrefixes=function(a){this.$1.topic_prefixes=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setURL=function(a){this.$1.url=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};a.prototype.setXhrReadyState=function(a){this.$1.xhr_ready_state=a;return this};a.prototype.setXhrStatus=function(a){this.$1.xhr_status=a;return this};c={app_version:!0,batch_size:!0,error_message:!0,error_reason:!0,error_text:!0,js_event_time_ms:!0,multi_view_subscription:!0,request_id:!0,response_headers:!0,session_id:!0,session_id_str:!0,status_code:!0,subscriber_id:!0,time:!0,topic_prefixes:!0,url:!0,weight:!0,xhr_ready_state:!0,xhr_status:!0};e.exports=a}),null);
__d("DocRPC",["ErrorUtils","FBLogger"],(function(a,b,c,d,e,f){__p&&__p();var g={_apis:{},_dispatch:function(a){__p&&__p();var c;try{a=JSON.parse(a)}catch(b){throw new Error('DocRPC unparsable dispatch: "'+a+'"')}if(Object.prototype.hasOwnProperty.call(g._apis,a.api)){var d=g._apis[a.api];d[a.method]&&(c=b("ErrorUtils").applyWithGuard(d[a.method],d,a.args))}c===undefined&&(c=null);return JSON.stringify(c)},publish:function(a,b){g._apis[b]=a},proxy:function(a,c,d){__p&&__p();var e={};d.forEach(function(d){__p&&__p();e[d]=function(){__p&&__p();var e={api:c,method:d,args:Array.prototype.slice.call(arguments)},f;try{if(a.closed)throw new Error("DocRPC window closed");f=a.DocRPC._dispatch(JSON.stringify(e))}catch(a){b("FBLogger")("doc_rpc").catching(a).warn("Encountered an error duing proxy call");return}if(typeof f==="string")try{f=JSON.parse(f)}catch(a){b("FBLogger")("doc_rpc").catching(a).mustfix("DocRPC %s.%s unparsable return: %s",c,d,f);throw new Error("DocRPC "+c+"."+d+' unparsable return: "'+f+'"')}return f}});return e}};e.exports=a.DocRPC=g}),null);
__d("ChannelTransport",["AjaxRequest","BanzaiODS","ChannelConstants","ChatproxyClientErrorsTypedLogger","DocRPC","LogHistory","TimeSlice","URI","bind","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){__p&&__p();var g="BROWSER_REFUSED_TO_GET_FAILURE_REASON_HEADER",h=b("LogHistory").getInstance("channel");function i(a){__p&&__p();var c=new(b("ChatproxyClientErrorsTypedLogger"))();c.setStatusCode(a.status);if(a.xhr!=null){var d;try{d=a.xhr.getResponseHeader("x-fb-chat-failure-reason")}catch(a){d=g}d&&c.setErrorReason(d)}c.setErrorMessage(a.errorType);a.uri!==undefined&&c.setURL(a.uri.getPath());c.log()}function j(){return(1048576*Math.random()|0).toString(36)}function k(a){return a!==null&&a!==undefined&&!isNaN(a)&&isFinite(a)&&0<=a&&a<=6}function l(a,c){var d="";k(a.subdomain)&&(d=a.subdomain+"-");var e=a.host;e=e===null||e===undefined?"edge-chat":a.host;c=new(b("URI"))(c).setDomain(d+e+"."+a.domain).setPort(a.port).setSecure(new(b("URI"))(window.location.href).isSecure());return c}function m(a){__p&&__p();var c={partition:a.partition,cb:j(),failure:a.pingFailuresOnSubdomain};a.sticky_token&&(c.sticky_token=a.sticky_token);a.sticky_pool&&(c.sticky_pool=a.sticky_pool);c=l(a,"/p").setQueryData(c);h.log("start_p",{uri:c.toString()});var d=new(b("AjaxRequest"))("GET",c);b("AjaxRequest").supportsCORS()&&(d.xhr.withCredentials=!0);var e=function(b){h.log("finish_p",{xhr:b.toJSON?b.toJSON():b,subdomain:a.subdomain,fullHost:a.fullHost})};d.onError=function(c){b("BanzaiODS").bumpEntityKey("ChannelTransport","sendP.error");i(d);e(c);if(a.subdomain===null)return;k(a.subdomain)&&(a.pingFailuresOnSubdomain++,a.subdomain++,a.subdomain>6&&(a.subdomain=0))};d.timeout=a.P_TIMEOUT;d.onSuccess=function(a){b("BanzaiODS").bumpEntityKey("ChannelTransport","sendP.success"),e(a)};d.send()}function n(a,c,d){__p&&__p();var e=new Image(),f=0,g=function(a){e.abort();return a?c():d()};e.onload=b("TimeSlice").guard(function(){h.log("ping_ok",{duration:Date.now()-f}),b("BanzaiODS").bumpEntityKey("ChannelTransport","sendPing.success"),g(!0)},"ChannelTransport image.onload");e.onerror=b("TimeSlice").guard(function(){m(a),b("BanzaiODS").bumpEntityKey("ChannelTransport","sendPing.error"),i(e),g(!1)},"ChannelTransport image.onerror");var k=b("setTimeoutAcrossTransitions")(e.onerror,1e4);e.abort=function(){k&&(b("clearTimeout")(k),k=null),e.onload=e.onerror=null};var n={partition:a.partition,cb:j()};a.sticky_token&&(n.sticky_token=a.sticky_token);a.sticky_pool&&(n.sticky_pool=a.sticky_pool);a.lastRequestErrorReason&&(n.reason=a.lastRequestErrorReason,a.lastRequestErrorReason=null);a.uid&&a.viewerUid&&(n.uid=a.uid,n.viewer_uid=a.viewerUid);f=Date.now();e.src=l(a,"/ajax/chatproxy-ping").setQueryData(n);return e}function a(a,c){__p&&__p();var d={channel:a.user_channel,partition:a.partition,clientid:a.sessionID,cb:j(),cap:0,uid:a.uid,viewer_uid:a.viewerUid};a.sticky_token&&(d.sticky_token=a.sticky_token);a.sticky_pool&&(d.sticky_pool=a.sticky_pool);a.profile&&(d.profile=a.profile);a.capabilities&&(d.cap=a.capabilities);d.id=c;c=l(a,"/add_bud").setQueryData(d);var e=new(b("AjaxRequest"))("GET",c);b("AjaxRequest").supportsCORS()&&(e.xhr.withCredentials=!0);e.onError=function(a){b("BanzaiODS").bumpEntityKey("ChannelTransport","sendAdditionalBuddy.error"),h.warn("add_buddy_error"),i(e)};e.onSuccess=function(a){b("BanzaiODS").bumpEntityKey("ChannelTransport","sendAdditionalBuddy.success"),h.log("add_buddy_ok")};e.timeout=a.P_TIMEOUT;e.send()}function c(a){__p&&__p();var c={channel:a.user_channel,partition:a.partition,clientid:a.sessionID,cb:j(),cap:0,uid:a.uid,viewer_uid:a.viewerUid};a.sticky_token&&(c.sticky_token=a.sticky_token);a.sticky_pool&&(c.sticky_pool=a.sticky_pool);a.is_offline||a.shouldSuppressPresence?c.state="offline":c.state="active";if(c.state===a.lastPresenceState)return;a.lastPresenceState=c.state;a.profile&&(c.profile=a.profile);a.capabilities&&(c.cap=a.capabilities);c=l(a,"/active_ping").setQueryData(c);var d=new(b("AjaxRequest"))("GET",c);b("AjaxRequest").supportsCORS()&&(d.xhr.withCredentials=!0);d.onError=function(a){b("BanzaiODS").bumpEntityKey("ChannelTransport","sendActivePing.error"),h.warn("active_ping_error"),i(d)};d.onSuccess=function(a){b("BanzaiODS").bumpEntityKey("ChannelTransport","sendActivePing.success"),h.log("active_ping_ok")};d.timeout=a.P_TIMEOUT;d.send()}function o(a,c,d,e){__p&&__p();var f=new Date(),g=-1;a.userActive>0&&(g=(f-a.userActive)/1e3|0,g<0&&h.warn("idle_regression",{idleTime:g,now:f.getTime(),userActive:a.userActive}));f={channel:a.user_channel,seq:a.seq,partition:a.partition,clientid:a.sessionID,cb:j(),idle:g,qp:"y",cap:0};a.state.aiq&&(f.aiq=a.state.aiq);a.ready&&((a.seqTurSentAt==-1||a.seqTurSentAt==a.seq)&&(f.tur=a.timeUntilReady,f.qpmade=a.queueMade,a.seqTurSentAt=a.seq));f.pws=a.pws;a.sequenceId>0&&(f.isq=a.sequenceId);f.msgs_recv=a.estimatedReceived;a.uid&&a.viewerUid&&(f.uid=a.uid,f.viewer_uid=a.viewerUid);a.sticky_token?f.sticky_token=a.sticky_token:(f.request_batch=1,a.msgr_region&&(f.msgr_region=a.msgr_region));a.sticky_pool&&(f.sticky_pool=a.sticky_pool);"trace_id"in a&&(f.traceid=a.trace_id);a.is_offline||a.shouldSuppressPresence?f.state="offline":a.userActive>0&&g<60&&(f.state="active");a.lastPresenceState=f.state;a.streamingCapable&&(f.mode="stream",f.format="json");a.profile&&(f.profile=a.profile);a.capabilities&&(f.cap=a.capabilities);g=l(a,"/pull").setQueryData(f);f="GET";var k=new(b("AjaxRequest"))(f,g);b("AjaxRequest").supportsCORS()&&(k.xhr.withCredentials=!0);k.timeout=a.streamingCapable?a.STREAMING_TIMEOUT:a.LONGPOLL_TIMEOUT;k.onJSON=function(a){b("BanzaiODS").bumpEntityKey("ChannelTransport","sendPull.json"),c(a)};k.onSuccess=function(a){b("BanzaiODS").bumpEntityKey("ChannelTransport","sendPull.success"),d(a)};k.onError=function(){var c=this.status==12002&&this._time>=a.MIN_12002_TIMEOUT||this.status==504&&this._time>=a.MIN_504_TIMEOUT,f=c?d:e;c?b("BanzaiODS").bumpEntityKey("ChannelTransport","sendPull.success"):(b("BanzaiODS").bumpEntityKey("ChannelTransport","sendPull.error"),i(k));return f&&f.apply(this,arguments)};k.send();a.inStreaming=a.streamingCapable;return k}function p(a){this.manager=a,this.init&&this.init()}function d(a){p.apply(this,arguments)}Object.assign(d.prototype,{logName:"CORS",enterState:function(a,c){this._request&&(this._request.abort(),this._request=null);a=="init"&&b("setTimeoutAcrossTransitions")(b("bind")(this.manager,"exitState",{status:b("ChannelConstants").OK,stateId:c.stateId}),0);if(!/pull|ping/.test(a))return;var d=this.manager;a=="ping"?this._request=n(c,b("bind")(d,"exitState",{status:b("ChannelConstants").OK,stateId:c.stateId}),b("bind")(d,"exitState",{status:b("ChannelConstants").ERROR,stateId:c.stateId})):a=="pull"&&(this._request=o(c,b("bind")(d,"_processTransportData",c.stateId),b("bind")(d,"exitState",{status:b("ChannelConstants").OK,stateId:c.stateId}),b("bind")(d,"exitState",{status:b("ChannelConstants").ERROR,stateId:c.stateId})))}});function f(a){h.log("iframe_init_constructor"),p.apply(this,arguments),this._iframe=document.createElement("iframe"),this._iframe.style.display="none",document.body.appendChild(this._iframe),b("DocRPC").publish(this,"outerTransport")}Object.assign(f.prototype,{logName:"iframe",_initIframe:function(a){__p&&__p();h.log("iframe_init_start");window.onchanneliframeready=function(){h.log("iframe_resources");return a.resources};window.onchanneliframeloaded=function(){h.log("iframe_loaded")};if(a){this._iframeURI=l(a,a.path);if(a.resources){var c=this._iframeURI.getDomain();a.resources=a.resources.map(function(a){var d=new(b("URI"))(a);return d.getPath().startsWith("/intern/rsrc.php")&&d.getQueryData().origin!==undefined?d.addQueryData("origin",c).toString():a})}}else this._iframeURI="about:blank";this._iframeProxy=null;try{this._iframe.contentWindow.location.replace(this._iframeURI),h.log("iframe_uri_set")}catch(c){h.error("iframe_uri_set_error",c),this.exitState({status:b("ChannelConstants").ERROR,stateId:a.stateId},c+"")}},enterState:function(a,c){a=="init"?this._initIframe(c):/idle|ping|pull/.test(a)?this._iframeProxy?this._iframeProxy.enterState.apply(this._iframeProxy,arguments):a!="idle"&&this.exitState({status:b("ChannelConstants").ERROR,stateId:c.stateId},"iframe not yet loaded"):a=="shutdown"&&this._initIframe()},_processTransportData:function(){this.manager._processTransportData.apply(this.manager,arguments)},exitState:function(a){this.manager.state=="init"&&a.status==b("ChannelConstants").OK&&(this._iframeProxy=b("DocRPC").proxy(this._iframe.contentWindow,"innerTransport",["enterState"],(this._iframeURI+"").replace(/iframe.*/,"")));if(/ping|pull/.test(this.manager.state)&&!this._iframeProxy)return;this.manager.exitState.apply(this.manager,arguments)}});function q(){this.init=this.init.bind(this),p.apply(this,arguments)}Object.assign(q.prototype,{logName:"iframe(inner)",init:function(){b("DocRPC").publish(this,"innerTransport");try{var a=b("DocRPC").proxy(window.parent,"outerTransport",["_processTransportData","exitState"],top.DocRPC.origin);Object.assign(this,a);this.exitState({status:b("ChannelConstants").OK,stateId:1e6})}catch(a){h.error("iframe_inner_init_error",a)}},enterState:function(a,c){this._request&&(this._request.abort(),this._request=null),a=="ping"?this._request=n(c,b("bind")(this,"exitState",{status:b("ChannelConstants").OK,stateId:c.stateId}),b("bind")(this,"exitState",{status:b("ChannelConstants").ERROR,stateId:c.stateId})):a=="pull"&&(this._request=o(c,b("bind")(this,"_processTransportData",c.stateId),b("bind")(this,"exitState",{status:b("ChannelConstants").OK,stateId:c.stateId}),b("bind")(this,"exitState",{status:b("ChannelConstants").ERROR,stateId:c.stateId})))}});e.exports={isSubdomain:k,getURI:l,Transport:p,CORSTransport:d,IframeTransport:f,IframeInnerTransport:q,sendActivePing:c,sendAdditionalBuddyRequest:a}}),null);
__d("MercuryLoggingHelper",[],(function(a,b,c,d,e,f){__p&&__p();function g(a){return Array.from(a).slice(0,6).join("")}a={obfuscateThread:function(a){var b=babelHelpers["extends"]({},a);a&&a.snippet&&a.snippet.length>9&&(b.snippet=g(a.snippet)+"...");return b},obfuscateMessage:function(a){var b=babelHelpers["extends"]({},a);a&&a.body&&a.body.length>9&&(b.body=g(a.body)+"...");return b}};e.exports=a}),null);
__d("ChannelTransportDataLogger",["Arbiter","JSLogger","MercuryLoggingHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[],h=10,i=function(a){return a.map(function(a){var c=a;(a.message||a.delta&&a.delta.body)&&(c=babelHelpers["extends"]({},a),a.message&&(c.message=b("MercuryLoggingHelper").obfuscateMessage(a.message)),a.delta&&a.delta.body&&(c.delta=b("MercuryLoggingHelper").obfuscateMessage(a.delta)));return c})};a={log:function(a){var b={t:a.t,seq:a.seq};a.ms&&(b.ms=i(a.ms));g.push(b);g.length>h&&g.shift()}};b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(a,b){b.channelTransportLog=g});e.exports=a}),null);
__d("ChatProxyConnectionState",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.auxiliaryIrisQueues={},this.aiq=null}a.prototype.subscribeIrisQueue=function(a,b){this.auxiliaryIrisQueues[a]=b,this.updateCaches()};a.prototype.unsubscribeIrisQueue=function(a){delete this.auxiliaryIrisQueues[a],this.updateCaches()};a.prototype.updateCaches=function(){var a=[];for(var b in this.auxiliaryIrisQueues)Object.prototype.hasOwnProperty.call(this.auxiliaryIrisQueues,b)&&(a.push(b),a.push(this.auxiliaryIrisQueues[b]));a.length===0?this.aiq=null:this.aiq=a.join(",")};e.exports=a}),null);
__d("FBAjaxRequest",["AjaxError","AjaxRequest","getAsyncParams"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("AjaxRequest"));g=c&&c.prototype;function a(a,c,d){"use strict";d=babelHelpers["extends"]({},b("getAsyncParams")(a),d);g.constructor.call(this,a,c,d);this.$FBAjaxRequest1=d;this.streamMode=!1}a.prototype.onJSONSafe=function(){"use strict";this.json&&(this.json.error&&(this.errorType=b("AjaxError").SERVER_ERROR,this.errorText="AsyncResponse error: "+this.json.error),this.json=this.json.payload),g.onJSONSafe.call(this)};a.prototype.send=function(a){"use strict";g.send.call(this,babelHelpers["extends"]({},a,this.$FBAjaxRequest1))};e.exports=a}),null);
__d("FantailLogger",["FantailConfig"],(function(a,b,c,d,e,f){__p&&__p();var g=b("FantailConfig").FantailLogQueue;a={debug:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).debug.apply(c,[b].concat(e))},info:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).info.apply(c,[b].concat(e))},warn:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).warn.apply(c,[b].concat(e))},error:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).error.apply(c,[b].concat(e))}};e.exports=a}),null);
__d("MovingStat",[],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.$1=a>0?a:6e4,this.$2=0,this.$3=0,this.$5={t:new Date(),count:0,v:0},this.$4=this.$5}a.prototype.add=function(a){"use strict";__p&&__p();this.$2+=a;this.$3++;var b=new Date();if(b-this.$5.t<1e3){this.$5.v+=a;this.$5.count++;return}this.$5.next={t:b,v:a,count:1};this.$5=this.$5.next;this.$6()};a.prototype.tally=function(a){a===void 0&&(a=1e3);this.$6();return{sum:this.$2,count:this.$3,timeAverage:this.$2*a/this.$1}};a.prototype.$6=function(){"use strict";var a=new Date()-this.$1;while(this.$4&&this.$4.next&&this.$4.t<a)this.$2-=this.$4.v,this.$3-=this.$4.count,this.$4=this.$4.next};e.exports=a}),null);
__d("InstantGamesPresenceProperties",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1=!1}a.prototype.addInstantGamePresence=function(){this.$1=!0};a.prototype.removeInstantGamePresence=function(){this.$1=!1};a.prototype.isActiveGamePresence=function(){return this.$1};b=new a();e.exports=b}),null);
__d("PresenceProperties",["ChannelConstants","InstantGamesPresenceProperties","WorkplaceChatHelper"],(function(a,b,c,d,e,f){__p&&__p();function a(){"use strict";this.$1=b("ChannelConstants").CAPABILITY_VOIP_INTEROP}a.prototype.getProperties=function(){"use strict";b("WorkplaceChatHelper").isDesktopChatApp()&&(this.$1|=b("ChannelConstants").CAPABILITY_ACTIVE_ON_DESKTOP_APP);b("InstantGamesPresenceProperties").isActiveGamePresence()?this.$1|=b("ChannelConstants").CAPABILITY_PLAYING_INSTANT_GAME:this.$1&=~b("ChannelConstants").CAPABILITY_PLAYING_INSTANT_GAME;return this.$1};c=new a();e.exports=c}),null);
__d("RTISession",["invariant","AjaxRequest","BanzaiODS","ChatproxyClientErrorsTypedLogger","ErrorUtils","URI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a,b,c,d,e,f,g,h,i,j){this.domain=a,this.topLevelDomain=b,this.port=c,this.edgePoolName=d,this.stickyToken=e,this.loggedInId=f,this.accountId=g,this.clientProfile=h!=null?h:"desktop",this.clientId=i,this.capabilities=j}a.prototype.issueRequest=function(a,c,d,e,f){__p&&__p();var h=this.domain+"."+this.topLevelDomain,i=(1048576*Math.random()|0).toString(36);i={cb:i,sticky_token:this.stickyToken,uid:this.loggedInId,viewer_uid:this.accountId,sticky_pool:this.edgePoolName,profile:this.clientProfile,clientid:this.clientId,cap:this.capabilities};for(var j in i)c[j]&&g(0,1632);Object.assign(i,c);c=new(b("URI"))(a).setDomain(h).setPort(this.port).setSecure(new(b("URI"))(window.location.href).isSecure()).setQueryData(i);a=d?"POST":"GET";var k=new(b("AjaxRequest"))(a,c);k.timeout=f!=null?f*1e3:3e4;k.streamMode=!1;k.xhr&&(k.xhr.withCredentials=!0);var l={};k.onSuccess=function(){b("BanzaiODS").bumpEntityKey("RTISession","request.success")};k.onJSON=function(){l.data=k.json,l.error=null,b("ErrorUtils").applyWithGuard(e,this,[l])}.bind(this);k.onError=function(){__p&&__p();var a=new Set(),c=null;if(d.subscriptions!=null&&Array.isArray(d.subscriptions)){c=d.subscriptions.length;for(var f=0;f<d.subscriptions.length;f++){var g=d.subscriptions[f].topic.split("/");g.pop();a.add(g.join("/"))}}l.data=null;l.error=k.errorType||"error";b("BanzaiODS").bumpEntityKey("RTISession","request.error");this.$1(k,a,c);b("ErrorUtils").applyWithGuard(e,this,[l])}.bind(this);k.send(JSON.stringify(d));b("BanzaiODS").bumpEntityKey("RTISession","request.attempt")};a.prototype.$1=function(a,c,d){__p&&__p();var e=new(b("ChatproxyClientErrorsTypedLogger"))();e.setStatusCode(a.status);if(a.xhr!=null){var f=a.xhr.getResponseHeader("x-fb-chat-failure-reason");f&&e.setErrorReason(f)}e.setSubscriberID(this.loggedInId);e.setSessionIDStr(this.clientId);e.setErrorMessage(a.errorType);e.setErrorText(a.errorText);e.setTopicPrefixes(c);e.setJsEventTimeMs(Math.floor(Date.now()/1e3));d!=null&&e.setBatchSize(d);a.uri&&e.setURL(a.uri.getPath());e.log()};e.exports=a}),null);
__d("SystemEvents",["ArbiterMixin","Cookie","ErrorGuard","ErrorUtils","SystemEventsInitialData","TimeSlice","UserActivity","UserAgent_DEPRECATED","gkx","mixin","setIntervalAcrossTransitions","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=1e3;c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));g=c&&c.prototype;function a(){g.constructor.call(this),this.$SystemEvents12=function(){var a=this.$SystemEvents7();this.$SystemEvents2!=a&&(this.$SystemEvents2=a,this.inform(this.USER,a));this.$SystemEvents13()}.bind(this),this.USER="SystemEvents/USER",this.ONLINE="SystemEvents/ONLINE",this.TIME_TRAVEL="SystemEvents/TIME_TRAVEL",this.$SystemEvents1=b("SystemEventsInitialData").ORIGINAL_USER_ID,this.$SystemEvents2=this.$SystemEvents1,this.$SystemEvents3=navigator.onLine,this.$SystemEvents4=Date.now(),this.$SystemEvents6()}a.prototype.isPageOwner=function(a){return(a||this.$SystemEvents7())==this.$SystemEvents1};a.prototype.isOnline=function(){return!!(b("UserAgent_DEPRECATED").chrome()||this.$SystemEvents3)};a.prototype.checkTimeTravel=function(){var a=Date.now(),b=a-this.$SystemEvents4;this.$SystemEvents4=a;(b<0||b>1e4)&&this.inform(this.TIME_TRAVEL,b)};a.prototype.$SystemEvents6=function(){this.$SystemEvents8(),this.$SystemEvents9(),this.$SystemEvents10(),this.$SystemEvents11()};a.prototype.$SystemEvents8=function(){var a=b("TimeSlice").guard(function(){this.$SystemEvents3||(this.$SystemEvents3=!0,this.inform(this.ONLINE,this.$SystemEvents3))}.bind(this),"SystemEvents onOnline"),c=b("TimeSlice").guard(function(){this.$SystemEvents3&&(this.$SystemEvents3=!1,this.inform(this.ONLINE,this.$SystemEvents3))}.bind(this),"SystemEvents onOffline");b("UserAgent_DEPRECATED").ie()?b("UserAgent_DEPRECATED").ie()>=11?(window.addEventListener("online",a,!1),window.addEventListener("offline",c,!1)):b("UserAgent_DEPRECATED").ie()>=8?window.attachEvent("onload",function(){document.body.ononline=a,document.body.onoffline=c}):b("setIntervalAcrossTransitions")(function(){(navigator.onLine?a:c)()},h):window.addEventListener&&(window.addEventListener("online",a,!1),window.addEventListener("offline",c,!1))};a.prototype.$SystemEvents13=function(){clearTimeout(this.$SystemEvents5),this.$SystemEvents5=b("setTimeoutAcrossTransitions")(this.$SystemEvents12,h)};a.prototype.$SystemEvents9=function(){if(self!==top&&b("gkx")("678677"))return;b("gkx")("678678")&&b("UserActivity").subscribe(function(){this.$SystemEvents13()}.bind(this));this.$SystemEvents13()};a.prototype.$SystemEvents10=function(){b("setIntervalAcrossTransitions")(this.checkTimeTravel.bind(this),h)};a.prototype.$SystemEvents11=function(){b("setIntervalAcrossTransitions")(function(){window.onerror!=b("ErrorUtils").onerror&&window.onerror!=b("ErrorGuard").onerror&&(window.onerror=b("ErrorUtils").onerror)},h)};a.prototype.$SystemEvents7=function(){return b("Cookie").get("c_user")||"0"};e.exports=new a()}),3);
__d("ChannelManager",["errorCode","Promise","AjaxError","AjaxRequest","Arbiter","AsyncRequest","BanzaiODS","ChannelClientID","ChannelConstants","ChannelInitialData","ChannelSubdomain","ChannelTransport","ChannelTransportDataLogger","ChatProxyConnectionState","ChatReliabilityInstrumentation","ChatVisibility","DTSG","Env","FantailLogger","FBAjaxRequest","ISB","JSLogger","LogHistory","MovingStat","PresenceCookieManager","PresenceProperties","PresenceState","PresenceUtil","Random","RTISession","SystemEvents","URI","UserActivity","clearTimeout","emptyFunction","requestAnimationFrameAcrossTransitions","setIntervalAcrossTransitions","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){__p&&__p();var h=b("JSLogger").create("channel"),i=b("LogHistory").getInstance("channel_manager"),j=null,k=b("emptyFunction"),l=new(b("Promise"))(function(a,b){k=a});function a(a){j=a}var m={idle:{ok:"init!"},init:{ok:"pull!",error:"reconnect",sys_online:"init",sys_timetravel:"init"},pull:{ok:"pull!",error:"ping",error_missing:"pull",error_msg_type:"pull",refresh_0:"reconnect",refresh_110:"reconnect",refresh_111:"reconnect",refresh_112:"pull",refresh_113:"pull",refresh_117:"reconnect"},ping:{ok:"pull!",error:"ping",error_stale:"reconnect!"},reconnect:{ok:"init!",error:"reconnect",sys_online:"reconnect",sys_timetravel:"reconnect"},shutdown:{},_all:{error_max:"shutdown!",error_shutdown:"shutdown!",sys_owner:"reconnect",sys_nonowner:"idle!",sys_online:"ping",sys_offline:"idle!",sys_timetravel:"ping"}},n={state:new(b("ChatProxyConnectionState"))(),userActive:Date.now(),created:Date.now(),ready:!1,seqTurSentAt:-1,queueMade:"",sequenceId:0,lastPresenceState:null,lastRequestErrorReason:null,seq:0,pingFailuresOnSubdomain:0,pws:"fresh",estimatedReceived:0,sessionID:b("ChannelClientID").getID(),capabilities:b("PresenceProperties").getProperties(),streamingCapable:!1,inStreaming:!1,shouldSuppressPresence:b("PresenceState").shouldSuppress(),LONGPOLL_TIMEOUT:6e4,STREAMING_TIMEOUT:6e4,P_TIMEOUT:3e4,IFRAME_LOAD_TIMEOUT:3e4,MIN_RETRY_INTERVAL:5e3,MAX_RETRY_INTERVAL:32e4,MIN_12002_TIMEOUT:9e3,MIN_504_TIMEOUT:2e4,STALL_THRESHOLD:18e4,JUMPSTART_THRESHOLD:9e4,MIN_INIT_PROBE_DELAY:3e3,INIT_PROBE_DELAY_RANDOMIZE_RANGE:12e3,CHANNEL_PROXY_REPORTING_MIN_INTERVAL:1e4,PROBE_DELAY:6e4,PROBE_HEARTBEATS_INTERVAL_LOW:1e3,PROBE_HEARTBEATS_INTERVAL_HIGH:5e3,STREAMING_EXIT_STATE_ON_CONTINUE:!1},o=1,p={},q=0;function r(){var a=b("AsyncRequest").lastSuccessTime;return a?Math.round((Date.now()-a)/1e3):-1}function s(a,b){return Object.prototype.hasOwnProperty.call(n,a)?n[a]:b}function t(){var a={};s("host")&&(a[s("user_channel")]=s("seq",0));return a}function u(a){a?(q=0,p={}):q++}c={state:"idle",nextState:null,proxyDown:!1,lastPullTime:Date.now(),lastReportOnMisguidedMsgTime:Date.now(),heartbeats:[],setTestCallback:a,backoff:!1,sessionRegistered:!1,init:function(a,c){__p&&__p();b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"initializing sessionid:%s at iris-seq:%s",n.sessionID,n.sequenceId);this.init=b("emptyFunction");b("Arbiter").subscribe(b("ChannelConstants").GET_RTI_SESSION_REQUEST,function(event,a){this.informCurrentSession()}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").CONSOLE_LOG,function(a,b){!1});b("requestAnimationFrameAcrossTransitions")(function(){b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"using session id: %s at seq: %s {%s} with sticky: %s/%s",n.sessionID,n.seq,n.sequenceId,n.sticky_token,n.sticky_pool),b("UserActivity").subscribe(function(){var a=b("ChannelTransport").getURI(n,"/U");b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"user activity sessionid: %s at seq: %s/{%s} with sticky: %s/%s state: %s uri: %s",n.sessionID,n.seq,n.sequenceId,n.sticky_token,n.sticky_pool,this.state,a);this.state=="pull"&&(n.userActive=Date.now(),b("ChannelTransport").sendActivePing(n))}.bind(this)),b("Arbiter").subscribe(b("ChannelConstants").ENTITY_PRESENCE_ACTIVE_PING,function(a){a=b("ChannelTransport").getURI(n,"/U");b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"entity presence activity sessionid: %s at seq: %s/{%s} with sticky: %s/%s state: %s uri: %s",n.sessionID,n.seq,n.sequenceId,n.sticky_token,n.sticky_pool,this.state,a);this.state=="pull"&&(n.userActive=Date.now())}.bind(this))}.bind(this));b("PresenceCookieManager").register("ch",t);var d=this.getConfig("max_conn",2);n.subdomain=b("ChannelSubdomain").allocate(d);b("ChannelTransport").isSubdomain(n.subdomain)||(b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"invalid subdomain from ChannelSubdomain: %s",n.subdomain),n.subdomain=null);this._transportRate=new(b("MovingStat"))(3e4);var e=b("AjaxRequest").supportsCORS()?"CORSTransport":"IframeTransport";b("BanzaiODS").bumpEntityKey("ChannelManager","transport_chosen."+e);this.transport=new(b("ChannelTransport")[e])(this);k(this.transport);a&&this.enterState(a,c);b("requestAnimationFrameAcrossTransitions")(function(){b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(event,a){this._transportRate&&(a.transportRate=this._transportRate.tally(),a.transportType=e,a.transportVersion=2)}.bind(this)),this._initMonitors()}.bind(this));if(this.getConfig("fullHost")&&b("AjaxRequest").supportsCORS()){if(this.getConfig("tryStreaming")){d=n.MIN_INIT_PROBE_DELAY+b("Random").random()*n.INIT_PROBE_DELAY_RANDOMIZE_RANGE;b("setTimeoutAcrossTransitions")(this._probeTest,d)}if(this.getConfig("trySSEStreaming")){a=n.MIN_INIT_PROBE_DELAY+b("Random").random()*n.INIT_PROBE_DELAY_RANDOMIZE_RANGE;b("setTimeoutAcrossTransitions")(this._sseProbeTest,a)}}},configure:function(){for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];i.log("configure",JSON.stringify(c));c.forEach(function(a){return Object.assign(n,a)});this._indicateLbInfoUpdated("reconnect",JSON.stringify(c));b("Arbiter").inform(b("ChannelConstants").ON_CONFIG,this)},getConfig:function(a,b){return s(a,b)},getCompleteConfig:function(){return n},subscribeIrisQueue:function(a,c){n.state.subscribeIrisQueue(a,c),this.exitState({status:b("ChannelConstants").OK,stateId:o})},unsubscribeIrisQueue:function(a){n.state.unsubscribeIrisQueue(a)},informCurrentSession:function(){var a=null;this.sessionRegistered&&n&&n.fullHost&&n.sticky_token&&n.uid&&(a=new(b("RTISession"))(n.fullHost,n.domain,n.port,n.sticky_pool,n.sticky_token,n.uid,n.viewerUid,n.profile,n.sessionID,n.capabilities));b("Arbiter").inform(b("ChannelConstants").RTI_SESSION,a)},isShutdown:function(){return this.state=="shutdown"},shouldIdle:function(){return!(b("SystemEvents").isPageOwner()&&b("SystemEvents").isOnline())},_sendIframeError:function(a){a=new(b("AsyncRequest"))().setURI("/ajax/presence/reconnect.php").setData({reason:a,fb_dtsg:b("DTSG").getToken()}).setOption("suppressErrorHandlerWarning",!0).setOption("retries",1).setMethod("GET").setReadOnly(!0).setAllowCrossPageTransition(!0);a.specifiesWriteRequiredParams()&&a.send()},_getDelay:function(){var a=Math.min(n.MIN_RETRY_INTERVAL*Math.pow(2,Math.max(0,q-1)),n.MAX_RETRY_INTERVAL);this.proxyDown&&"proxy_down_delay_millis"in n&&(a=n.proxy_down_delay_millis);this.proxyDown=!1;return Math.floor(a*(1+Math.random()*.5))},resetDelay:function(){u(!0)},enterState:function(){this._inEnterState&&(i.warn("enterstate_recursion",JSON.stringify({state:this.state,args:arguments})),b("ChatReliabilityInstrumentation").logERROR("enterstate_recursion"));this._inEnterState=!0;try{this._enterState.apply(this,arguments),this._inEnterState=!1}catch(a){this._inEnterState=!1;throw a}},_enterState:function(a){__p&&__p();var c=this.backoff?this._getDelay():0;this.backoff=!1;if(this.isShutdown()){b("FantailLogger").warn(b("ChannelConstants").FANTAIL_SERVICE,"not executing state due to shutdown mode: %s",a);return}if(a!="idle!"&&this.shouldIdle()){b("FantailLogger").warn(b("ChannelConstants").FANTAIL_SERVICE,"forced idleness");return}o++;n.stateId=o;b("clearTimeout")(this._deferredTransition);this._deferredTransition=null;!this.transport?(l.done(function(a){return a.enterState("idle")}),b("ChatReliabilityInstrumentation").logERROR("called enterState "+a+" before transport init")):this.transport.enterState("idle");this.state="idle";this.nextState=null;if(/!$/.test(a)){if(this._transportRate){var d=this._transportRate.tally().timeAverage,e=this.getConfig("MAX_CHANNEL_STATES_PER_SEC",1);d>=e&&(this._throttled||(this._throttled=!0,i.warn("throttled","{}"),b("Arbiter").inform(b("ChannelConstants").THROTTLED,d)),h.bump("throttle"),c=1e3/e)}}else/#$/.test(a)||(c=this._getDelay());a=a.replace(/\W*$/,"");if(!m[a]){b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"invalid state: %s",a);throw new Error("invalid state:"+a)}var f=Array.from(arguments),g;if(c<=0){g={state:a};this._transportRate&&this._transportRate.add(1);this.state=a;var j=this["_enter_"+this.state];j&&(f.shift(),j.apply(this,f));/init|idle|pull|ping/.test(this.state)&&(n.streamingCapable&&/pull/.test(this.state)&&(this.heartbeats=[]),n.is_offline=!b("ChatVisibility").isOnline(),n.capabilities=b("PresenceProperties").getProperties(),b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"entering transport state: %s",this.state),!this.transport?(l.done(function(a){return a.enterState(this.state,n)}.bind(this)),b("ChatReliabilityInstrumentation").logERROR("called enterState "+a+" before transport init")):this.transport.enterState(this.state,n),this.state=="ping"&&(g.url=b("ChannelTransport").getURI(n).toString(),g.port=n.port||"undefined"))}else this.state="idle",this.nextState=a,g={state:this.state,delay:c,nextState:a},f[0]=a+"#",this._deferredTransition=b("setTimeoutAcrossTransitions")(function(){this._deferredTransition=null,this.enterState.apply(this,f)}.bind(this),c);/pull/.test(a)&&(g.client_id=n.sessionID,g.streaming=n.inStreaming);b("Arbiter").inform(b("ChannelConstants").ON_ENTER_STATE,g)},exitState:function(a,c){__p&&__p();var d=a.stateId,e=a.status;if(this.isShutdown()||d<o)return;var f=this.state,g=Array.from(arguments);g[0]=a.status;var h={state:f,status:e};/pull/.test(f)&&(h.client_id=n.sessionID,h.streaming=n.inStreaming);/ping/.test(f)&&e!=b("ChannelConstants").OK&&(h.url=b("ChannelTransport").getURI(n).toString());this.nextState&&(h.nextState=this.nextState);c&&c.errorType?(n.lastRequestErrorReason=c.errorType,h.xhr=c.toJSON?c.toJSON():c,c.errorType==b("AjaxError").SERVICE_UNAVAILABLE&&(b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"got 5xx http status code, setting long delay"),this.proxyDown=!0),delete h.xhr.json):e!=b("ChannelConstants").OK&&(n.lastRequestErrorReason=e);c&&c.json&&(c.json.t&&(h.t=c.json.t),c.json.reason&&(h.reason=c.json.reason),c.json.seq&&(h.seq=c.json.seq));b("Arbiter").inform(b("ChannelConstants").ON_EXIT_STATE,h);var j=this["_exit_"+f];j&&(e=j.apply(this,g)||e);e!=b("ChannelConstants").OK&&(u(),p[f]=(p[f]||0)+1);var k=m[this.nextState||f][e]||m._all[e],l=k&&k.replace(/!*$/,"");l||(i.error("terminal_transition",JSON.stringify(h)),this._shutdownHint=b("ChannelConstants").HINT_INVALID_STATE,k="shutdown!",b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"entering shutdown state"));this._lastState=f;this._lastStatus=e;this.enterState(k)},_processTransportData:function(a,b){this._processTransportData0(a,b,b.json)},_processTransportData0:function(a,c,d){__p&&__p();var e=d.t;"s"in d&&(d.seq=d.s,delete d.s);if(d.u&&n.user&&d.u!=n.user){i.warn("misguided_msg",JSON.stringify({user:n.user,target:d.u}));this._reportProxyMisguidedMsg(d.u,n.user);return}b("ChannelTransportDataLogger").log(d);var f=n.seq;"seq"in d&&(n.seq=d.seq,b("PresenceState").doSync());switch(e){case"continue":n.inStreaming&&this.heartbeats.length<1&&(n.streamingCapable=!1,i.log("switch_to_longpoll","{}"),b("setTimeoutAcrossTransitions")(this._probeTest,n.PROBE_DELAY));u(!0);(!n.inStreaming||n.STREAMING_EXIT_STATE_ON_CONTINUE)&&this.exitState({status:b("ChannelConstants").OK,stateId:a});break;case"refresh":case"refreshDelay":b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"got refresh with reason: %s",d.reason);this.exitState({status:"refresh_"+(d.reason||0),stateId:a},c);break;case"backoff":b("FantailLogger").warn(b("ChannelConstants").FANTAIL_SERVICE,"server told client to back off");u();this.backoff=!0;break;case"lb":var g=d.lb_info;if(g){n.sticky_token=g.sticky;"pool"in g&&(n.sticky_pool=g.pool);if("sd"in g){var h=g.subdomain;b("ChannelTransport").isSubdomain(h)&&(n.subdomain=g.subdomain)}"vip"in g&&(n.host=g.vip);this._indicateLbInfoUpdated("chatproxy",JSON.stringify(d))}else i.error("missing_lb_info","{}");break;case"test_streaming":b("setTimeoutAcrossTransitions")(this._probeTest,500);break;case"fullReload":b("PresenceCookieManager").clear();i.log("full_reload","{}");this.sessionRegistered=!0;this.informCurrentSession();b("Arbiter").inform(b("ChannelConstants").ON_INVALID_HISTORY);u(!0);b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"full reload incurred");h=b("ChannelConstants").OK;this.exitState({status:h,stateId:a},c);"ms"in d&&this._processMessages(d,f);break;case"msg":u(!0);this._processMessages(d,f);break;case"heartbeat":if(n.inStreaming){g=Date.now();var j;this.heartbeats.length>0&&(j=g-this.heartbeats[this.heartbeats.length-1]);i.log("heartbeat_interval",JSON.stringify({client_id:n.sessionID,interval:j}));this.heartbeats.push(g)}break;case"batched":h=d.batches;for(var f=0;f<h.length;f++)this._processTransportData0(a,c,h[f]);break;default:b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"got an unknown protocol message: %s",e);i.error("unknown_msg_type",JSON.stringify({type:e}));break}},_processMessages:function(a,c){__p&&__p();"tr"in a&&(n.trace_id=a.tr);a=a.ms;var d=n.seq-a.length;for(var e=0;e<a.length;e++,d++){n.estimatedReceived++;if(d>=c){var f=a[e];if(f.type){var g=b("ChannelConstants").getArbiterType(f.type);if(f.type==="messaging"){var h={type:"messaging",event:f.event};f.message&&(h.inbox_unread=f.unread_counts&&f.unread_counts.inbox,h.tid=f.message.tid,h.mid=f.message.mid,b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"got message with id: %s",f.message.mid))}else f.type==="skywalker"?g=b("ChannelConstants").SKYWALKER:f.type==="qprimer"?(f.first=!n.ready,f.first&&(n.ready=!0,n.timeUntilReady=Date.now()-n.created,n.queueMade=f.made),g=b("ChannelConstants").CHANNEL_ESTABLISHED):f.type==="pws"?n.pws=f.pws:f.type==="delta"&&(n.sequenceId=f.iseq);try{b("Arbiter").inform(g,{obj:f})}catch(a){b("BanzaiODS").bumpEntityKey("ChannelManager","processMessages.error."+f.type),b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"message threw exception: %s %s",a,f)}}}else i.warn("seq_regression",JSON.stringify({last_seq:c,messages:a.length,seq:d}))}},_enter_init:function(){if(p.init>=this.getConfig("MAX_INIT_FAILS",2))return b("setTimeoutAcrossTransitions")(function(){return this.exitState({status:b("ChannelConstants").ERROR_MAX,stateId:o})}.bind(this),0);this._initTimer=b("setTimeoutAcrossTransitions")(function(){return this.exitState({status:b("ChannelConstants").ERROR,stateId:o},"timeout")}.bind(this),n.IFRAME_LOAD_TIMEOUT)},_enter_reconnect:function(a){__p&&__p();i.warn("enter_reconnect",a);b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"entered reconnect with reason: %s",a);var c=o;if(!b("PresenceUtil").hasUserCookie()){b("FantailLogger").warn(b("ChannelConstants").FANTAIL_SERVICE,"user has no cookie???");i.warn("no_user_cookie","{}");b("setTimeoutAcrossTransitions")(function(){this._shutdownHint=b("ChannelConstants").HINT_AUTH,this.exitState({status:b("ChannelConstants").ERROR_SHUTDOWN,stateId:c})}.bind(this),0);return}a={reason:a,fb_dtsg:b("DTSG").getToken()};b("ISB").token&&(a.fb_isb=b("ISB").token);j&&j(a);var d=new(b("FBAjaxRequest"))("GET","/ajax/presence/reconnect.php",a);d.onSuccess=function(){this.configure(d.json),b("PresenceCookieManager").store(),this.exitState({status:b("ChannelConstants").OK,stateId:c})}.bind(this);d.onError=function(){var a=d.json&&d.json.error;b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"reconnect error: %s",d.errorType);(d.errorType==b("AjaxError").TRANSPORT_ERROR||d.errorType==b("AjaxError").PROXY_ERROR||d.errorType==b("AjaxError").SERVICE_UNAVAILABLE)&&(this._shutdownHint=b("ChannelConstants").HINT_CONN);a&&a==1356007?this._shutdownHint=b("ChannelConstants").HINT_MAINT:a==1357001||a==1357004||a==1348009?this._shutdownHint=b("ChannelConstants").HINT_AUTH:this._shutdownHint=null;this.exitState({status:this._shutdownHint?b("ChannelConstants").ERROR_SHUTDOWN:b("ChannelConstants").ERROR,stateId:c},d)}.bind(this);d.send()},_enter_shutdown:function(){b("Arbiter").inform(b("ChannelConstants").ON_SHUTDOWN,{reason:this._shutdownHint});if("shutdown_recovery_interval_seconds"in n&&n.shutdown_recovery_interval_seconds>0){var a=n.shutdown_recovery_interval_seconds*1e3;b("setTimeoutAcrossTransitions")(function(){b("Arbiter").inform(b("ChannelConstants").ATTEMPT_RECONNECT),this._shutdownHint=null,this.state="reconnect!",this.enterState("reconnect!")}.bind(this),a)}},_exit_init:function(a){this._initTimer&&(this._initTimer=b("clearTimeout")(this._initTimer)),a==b("ChannelConstants").ERROR_MAX&&this._sendIframeError(b("ChannelConstants").reason_IFrameLoadGiveUp)},_exit_pull:function(a,c){if(a===b("ChannelConstants").OK){this.lastPullTime=Date.now();return}a="exit status: "+a;c&&c.errorType&&(a+=" ajax request error: "+c.errorType);b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"pull failed with status: %s",a)},_exit_ping:function(a){if(a!==b("ChannelConstants").OK){b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"ping failed with status: %s",a);return}a=Date.now()-(this.lastPullTime||b("Env").start);if(a>n.STALL_THRESHOLD){b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"didnt complete a successful pull for too long");return b("ChannelConstants").ERROR_STALE}},_reportProxyMisguidedMsg:function(a,c){__p&&__p();b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"misguided message to %s meant for %s",c,a);var d=Date.now();if(d-this.lastReportOnMisguidedMsgTime<=n.CHANNEL_PROXY_REPORTING_MIN_INTERVAL)return;this.lastReportOnMisguidedMsgTime=d;d={received_uid:a,expected_uid:c};n.sticky_token&&(d.sticky_token=n.sticky_token);a=new(b("URI"))("/err_misguided_msg").setDomain(n.host+"."+n.domain).setPort(n.port).setSecure(new(b("URI"))(window.location.href).isSecure()).setQueryData(d);c=new(b("AjaxRequest"))("GET",a);b("AjaxRequest").supportsCORS()&&(c.xhr.withCredentials=!0);c.onSuccess=function(a){};c.onError=function(a){};c.onJSON=function(a){};c.send()},_initMonitors:function(){__p&&__p();var a=Date.now(),c=Date.now(),d={total:0},e="idle",f=!1;b("SystemEvents").subscribe([b("SystemEvents").USER,b("SystemEvents").ONLINE,b("SystemEvents").TIME_TRAVEL],function(a,d){__p&&__p();u(!0);c=null;this.lastPullTime=Date.now();var e;switch(a){case b("SystemEvents").USER:e=b("SystemEvents").isPageOwner()?b("ChannelConstants").SYS_OWNER:b("ChannelConstants").SYS_NONOWNER;break;case b("SystemEvents").ONLINE:e=d?b("ChannelConstants").SYS_ONLINE:b("ChannelConstants").SYS_OFFLINE;break;case b("SystemEvents").TIME_TRAVEL:if(n.skipTimeTravel)return;if(0<d){b("FantailLogger").warn(b("ChannelConstants").FANTAIL_SERVICE,"skipping time travel failure. %s",d);return}e=b("ChannelConstants").SYS_TIMETRAVEL;break}this.exitState({status:e,stateId:o})}.bind(this));var g=function(f,g){__p&&__p();var h=Date.now(),j=null;g?(a=h,j=g.nextState||g.state):j=e;b("SystemEvents").checkTimeTravel();if(c){g=Math.round((h-c)/1e3);g>0&&(d[e]=(d[e]||0)+g,d.total+=g)}e=j;c=h;f||(d.lastSuccessTime=r(),d.online=b("SystemEvents").isOnline(),i.log("rollup",JSON.stringify(d)))};b("Arbiter").subscribe(b("ChannelConstants").ON_ENTER_STATE,g);b("setIntervalAcrossTransitions")(g,6e4);b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(a,b){b.channelRollup=d});g=function(){__p&&__p();if(this.isShutdown()||this.shouldIdle())return;b("SystemEvents").checkTimeTravel();var c=Date.now()-(this.lastPullTime||b("Env").start);if(!f&&c>n.STALL_THRESHOLD){var d=r();i.error("stall",JSON.stringify({lastSuccessTime:d,rollupState:e}));b("ChatReliabilityInstrumentation").logCHANNEL_STALLED(c.toString());f=!0}d=Date.now()-a;this.state=="pull"&&d>n.JUMPSTART_THRESHOLD&&(a=null,i.warn("jumpstart",JSON.stringify({state:this.state,dormant:d})),b("Arbiter").inform(b("ChannelConstants").JUMPSTART,d),this.enterState("init"))}.bind(this);b("setIntervalAcrossTransitions")(g,5e3)},_indicateLbInfoUpdated:function(a,c){var d=!b("AjaxRequest").supportsCORS(),e=b("ChannelTransport").isSubdomain(n.subdomain);!e||d?n.fullHost=n.host:n.fullHost=n.subdomain+"-"+n.host;b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"received lb info: %s at seq: %s{%s} with ".concat("sticky: %s/%s, subdomain: %s, fullHost: %s, state: %s,").concat(" source: %s, args: %s"),n.sessionID,n.seq,n.sequenceId,n.sticky_token,n.sticky_pool,n.subdomain,n.fullHost,this.state,a,c)},_probeTest:function(){__p&&__p();n.streamingCapable=!1;var a=[],c={mode:"stream",format:"json"};n.sticky_token&&(c.sticky_token=n.sticky_token);c=new(b("URI"))("/probe").setDomain(n.fullHost+"."+n.domain).setPort(n.port).setSecure(new(b("URI"))(window.location.href).isSecure()).setQueryData(c);b("BanzaiODS").bumpEntityKey("ChannelManager","probe.attempt");c=new(b("AjaxRequest"))("GET",c);c.onJSON=function(c,d){if(c&&c.json&&c.json.t==="heartbeat"){a.push(Date.now());if(a.length>=2){d=a[1]-a[0];d>=n.PROBE_HEARTBEATS_INTERVAL_LOW&&d<=n.PROBE_HEARTBEATS_INTERVAL_HIGH?(n.streamingCapable=!0,b("BanzaiODS").bumpEntityKey("ChannelManager","probe.switch_to_streaming"),i.log("switch_to_streaming","{}")):b("BanzaiODS").bumpEntityKey("ChannelManager","probe.failure.delayed")}}};c.onSuccess=function(c){a.length!=2&&(n.streamingCapable=!1,b("BanzaiODS").bumpEntityKey("ChannelManager","probe.failure.data_loss"),i.error("probe_error",JSON.stringify({error:"beats.length = "+a.length}))),b("BanzaiODS").bumpEntityKey("ChannelManager","probe.success"),i.log("probe_success","{}")};c.onError=function(a){n.streamingCapable=!1,b("BanzaiODS").bumpEntityKey("ChannelManager","probe.failure.error"),i.error("probe_error",JSON.stringify(a))};c.send()},_sseProbeTest:function(){__p&&__p();if(!window.EventSource){b("BanzaiODS").bumpEntityKey("ChannelManager","sse_probe.failure.no_event_source");i.log("sse_probe.failure.no_event_source","{}");return}var a=[],c={mode:"sse",format:"json"};n.sticky_token&&(c.sticky_token=n.sticky_token);c=new(b("URI"))("/sse_probe").setDomain(n.fullHost+"."+n.domain).setPort(n.port).setSecure(new(b("URI"))(window.location.href).isSecure()).setQueryData(c);b("BanzaiODS").bumpEntityKey("ChannelManager","sse_probe.attempt");var d=new EventSource(c),e=b("setTimeoutAcrossTransitions")(function(){d.close(),b("BanzaiODS").bumpEntityKey("ChannelManager","sse_probe.failure.timeout"),i.log("sse_probe.failure.timeout","{}")},n.PROBE_HEARTBEATS_INTERVAL_HIGH*6);d.addEventListener("heartbeat",function(c){a.push(Date.now());if(a.length>=2){c=a[1]-a[0];c>=n.PROBE_HEARTBEATS_INTERVAL_LOW&&c<=n.PROBE_HEARTBEATS_INTERVAL_HIGH?(b("BanzaiODS").bumpEntityKey("ChannelManager","sse_probe.success"),i.log("sse_probe.success","{}")):(b("BanzaiODS").bumpEntityKey("ChannelManager","sse_probe.failure.delayed"),i.log("sse_probe.failure.delayed","{}"));b("clearTimeout")(e);d.close()}});d.onerror=function(a){b("BanzaiODS").bumpEntityKey("ChannelManager","sse_probe.failure.error"),i.error("sse_probe.failure.error",JSON.stringify(a)),b("clearTimeout")(e),d.close()}},startChannelManagerForApp:function(a){this.startChannelManager!==b("emptyFunction")&&this.startChannelManager(),b("ChannelInitialData").channelConfig&&n&&(n.profile=a)},startChannelManager:function(){b("ChannelInitialData").channelConfig?(this.configure(b("ChannelInitialData").channelConfig),/shutdown/.test(b("ChannelInitialData").state)&&(this._shutdownHint=b("ChannelConstants")[b("ChannelInitialData").reason]),this.init(b("ChannelInitialData").state,b("ChannelInitialData").reason),b("ChatReliabilityInstrumentation").logCHANNEL_INIT(),this.startChannelManager=b("emptyFunction")):b("ChatReliabilityInstrumentation").logCHANNEL_NOCONFIG()}};e.exports=c}),null);
__d("ReactAbstractContextualDialog",["ContextualDialog","ContextualDialogArrow","ContextualDialogKeepInViewport","LayerAutoFocus","LayerHideOnBlur","LayerHideOnEscape","LayerRefocusOnHide","React","ReactDOM"],(function(a,b,c,d,e,f){__p&&__p();var g=b("React").PropTypes;a={createSpec:function(a){__p&&__p();return{displayName:a.displayName,propTypes:{position:g.oneOf(["above","below","left","right"]),alignment:g.oneOf(["left","center","right"]),offsetX:g.number,offsetY:g.number,width:g.number,autoFocus:g.bool,focusContextOnHide:g.bool,arrowBehavior:g.func,behaviors:g.object,shown:g.bool,context:g.object,contextRef:g.func,dialogRole:g.oneOf(["dialog","region","alert"]),hoverContext:g.object,hoverContextRef:g.func,hoverShowDelay:g.number,hoverHideDelay:g.number,hideOnBlur:g.bool,hideOnEscape:g.bool,insertParent:g.object,keepInViewport:g.bool,label:g.node,labelledBy:g.string,onBeforeHide:g.func,onToggle:g.func,hasActionableContext:g.bool,"data-testid":g.string},immutableProps:{modal:null},createLayer:function(c){__p&&__p();var d=this.props.context||b("ReactDOM").findDOMNode(this.props.contextRef()),e=this.props.hoverContext||this.props.hoverContextRef&&b("ReactDOM").findDOMNode(this.props.hoverContextRef());e=babelHelpers["extends"]({context:d,hoverContext:e,hoverShowDelay:this.props.hoverShowDelay,hoverHideDelay:this.props.hoverHideDelay,position:this.props.position,alignment:this.props.alignment,offsetX:this.props.offsetX,offsetY:this.props.offsetY,width:this.props.width,dialogRole:this.props.dialogRole,label:this.props.label,labelledBy:this.props.labelledBy,shouldSetARIAProperties:!this.props.hasActionableContext,arrowBehavior:this.props.arrowBehavior||b("ContextualDialogArrow"),addedBehaviors:this.enumerateBehaviors(this.props.behaviors),"data-testid":this.props["data-testid"]},a||{});e=new(b("ContextualDialog"))(e,c);this.props.contextBounds&&e.setContextWithBounds(d,this.props.contextBounds);this.props.autoFocus!==!1&&e.enableBehavior(b("LayerAutoFocus"));this.props.hideOnBlur===!0&&e.enableBehavior(b("LayerHideOnBlur"));this.props.hideOnEscape===!0&&e.enableBehavior(b("LayerHideOnEscape"));this.props.focusContextOnHide===!1&&e.disableBehavior(b("LayerRefocusOnHide"));this.props.keepInViewport===!1&&e.disableBehavior(b("ContextualDialogKeepInViewport"));this.props.onBeforeHide&&e.subscribe("beforehide",this.props.onBeforeHide);this.props.insertParent&&e.setInsertParent(this.props.insertParent);e.conditionShow(this.props.shown);return e},receiveProps:function(a,c){this.updateBehaviors(c.behaviors,a.behaviors);var d=a.context||a.contextRef&&b("ReactDOM").findDOMNode(a.contextRef());d&&(a.contextBounds?this.layer.setContextWithBounds(d,a.contextBounds):this.layer.setContext(d));c.hideOnEscape!==a.hideOnEscape&&(a.hideOnEscape?this.layer.enableBehavior(b("LayerHideOnEscape")):this.layer.disableBehavior(b("LayerHideOnEscape")));this.layer.setPosition(a.position).setAlignment(a.alignment).setOffsetX(a.offsetX).setOffsetY(a.offsetY).setWidth(a.width).conditionShow(a.shown)}}}};e.exports=a}),null);
__d("XUIAmbientNUXBody.react",["cx","React","XUICloseButton.react","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){"use strict";var a=b("joinClasses")("_21es",this.props.className,this.props.noCloseButton?"_izg":null),c=this.props.noCloseButton?null:b("React").createElement(b("XUICloseButton.react"),{shade:"light",className:"layer_close_elem _36gl",onClick:this.props.onCloseButtonClick,onFocus:this.props.onFocus});return b("React").createElement("div",{className:a},c,b("React").createElement("div",{className:"__xn"},this.props.children))};function a(){"use strict";h.apply(this,arguments)}a.defaultProps={noCloseButton:!1};e.exports=a}),null);
__d("XUIAmbientNUXDarkTheme",["cx"],(function(a,b,c,d,e,f,g){a={wrapperClassName:"_6dh- _2x6q",arrowDimensions:{offset:14,length:18}};e.exports=a}),null);
__d("XUIAmbientNUX.react",["fbt","React","ReactAbstractContextualDialog","ReactLayer","XUIAmbientNUXBody.react","XUIAmbientNUXDarkTheme","XUIAmbientNUXTheme","uniqueID"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i=300,j=380,k=b("ReactLayer").createClass(b("ReactAbstractContextualDialog").createSpec({displayName:"XUIAmbientNUX",theme:b("XUIAmbientNUXTheme")})),l=b("ReactLayer").createClass(b("ReactAbstractContextualDialog").createSpec({displayName:"XUIAmbientNUX",theme:b("XUIAmbientNUXDarkTheme")}));c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=b("uniqueID")(),this.$2=b("uniqueID")(),c}a.prototype.$3=function(){"use strict";switch(this.props.width){case"wide":return j;case"custom":return this.props.customwidth;case"auto":return null;default:return i}};a.prototype.$4=function(){"use strict";return g._("Learn about this new feature")};a.prototype.render=function(){"use strict";var a=this.props.labelledBy,c=null,d=null;a||(c=b("React").createElement("div",{"aria-label":this.props.label||this.$4(),id:this.$2,key:this.$2}),a=this.$2);var e=g._("Close");d=b("React").createElement("a",{className:"layer_close_elem accessible_elem",href:"#",id:this.$1,key:this.$1,"aria-label":e,"aria-labelledby":this.$1+" "+a,role:"button"});e=this.props.useDarkMode?l:k;return b("React").createElement(e,{alignment:this.props.alignment,autoFocus:!1,behaviors:this.props.behaviors,context:this.props.context,contextRef:this.props.contextRef,dialogRole:"region",focusContextOnHide:!1,hasActionableContext:this.props.hasActionableContext,hideOnBlur:this.props.hideOnBlur,insertParent:this.props.insertParent,labelledBy:a,offsetX:this.props.offsetX,offsetY:this.props.offsetY,onBeforeHide:this.props.onBeforeHide,position:this.props.position,shown:this.props.shown,width:this.$3()},b("React").createElement(b("XUIAmbientNUXBody.react"),{className:this.props.className,noCloseButton:this.props.noCloseButton,onCloseButtonClick:this.props.onCloseButtonClick,onFocus:this.props.onFocus},this.props.children,c,this.props.noCloseButton?d:null))};a.defaultProps={hasActionableContext:!1,hideOnBlur:!1,noCloseButton:!1,shown:!1,useDarkMode:!1,width:"normal"};e.exports=a}),null);
__d("FBRTCConstants",["keyMirror"],(function(a,b,c,d,e,f){__p&&__p();a=Object.freeze({OFFER:"offer",ANSWER:"answer",ICE_CANDIDATE:"ice_candidate",OK:"ok",PING:"ping",PING_ACK:"ping_ack",HANGUP:"hang_up",OTHER_DISMISS:"other_dismiss",MSG_ACK:"msg_ack",PRANSWER:"pranswer",ICERESTART_OFFER:"icerestart_offer",ICERESTART_ANSWER:"icerestart_answer",PCRESTART_OFFER:"pcrestart_offer",PCRESTART_ANSWER:"pcrestart_answer",SDP_UPDATE:"sdp_update",OFFER_ACK:"offer_ack",OFFER_NACK:"offer_nack",ANSWER_ACK:"answer_ack",SET_VIDEO:"set_video",VIDEO_REQUEST:"video_request",ACK:"ack",SWITCH_TO_MULTIWAY:"switch_to_multiway"});c=Object.freeze({CHILD_WINDOW_READY:"rtc_child_window_ready",CHILD_WINDOW_START_CALL:"rtc_child_window_start_call",CHILD_WINDOW_MESSAGE:"rtc_child_window_message"});d=Object.freeze({DIRECT_VIDEO:"direct_video",ESCALATED:"escalated",ESCALATION_DECLINED:"escalation_declined",VOIP:"voip"});f=b("keyMirror")({SCREEN:null,CAMERA:null});var g=Object.freeze({LL_NONE:0,LL_BASIC:1,LL_DEBUG:2,LL_WARNING:3,LL_INFO:4,LL_VERBOSE:5}),h=Object.freeze({AUDIO_ONLY:"audio_only",AUDIO_VIDEO:"audio_video",SCREEN_CONTENT:"screen"}),i=Object.freeze({CUSTOM_VIDEO_STREAM_SIZE:"CUSTOM_VIDEO_STREAM_SIZE",CUSTOM_VIDEO:"CUSTOM_VIDEO",FHD_VIDEO:"FHD_VIDEO",HD_VIDEO:"HD_VIDEO",LQ_VIDEO:"LQ_VIDEO",NO_VIDEO:"NO_VIDEO",SD_VIDEO:"SD_VIDEO",HD_IDEAL_LQ_REQUIRED_VIDEO:"HD_IDEAL_LQ_REQUIRED_VIDEO"}),j=Object.freeze({FHD_HEIGHT:1080,HD_HEIGHT:720,LQ_HEIGHT:180,SD_HEIGHT:480,FHD_WIDTH:1920,HD_WIDTH:1280,LQ_WIDTH:320,SD_WIDTH:848,VLQ_FRAME_RATE:5,LQ_FRAME_RATE:15,FRAME_RATE:30}),k=Object.freeze({UNKNOWN:-1,IGNORE_CALL:0,HANGUP_CALL:1,IN_ANOTHER_CALL:2,ACCEPT_AFTER_HANGUP:3,NO_ANSWER_TIMEOUT:4,INCOMING_TIMEOUT:5,OTHER_INSTANCE_HANDLED:6,SIGNALING_MESSAGE_FAILED:7,CONNECTION_DROPPED:8,CLIENT_INTERRUPTED:9,WEBRTC_ERROR:10,CLIENT_ERROR:11,NO_PERMISSION:12,OTHER_NOT_CAPABLE:13,NO_UI_ERROR:14,UNSUPPORTED_VERSION:15,CALLER_NOT_VISIBLE:16,CARRIER_BLOCKED:17,OTHER_CARRIER_BLOCKED:18,CLIENT_ENCRYPTION_ERROR:19,INACTIVE_TIMEOUT:20}),l=["IgnoreCall","HangupCall","InAnotherCall","CallEndAcceptAfterHangUp","NoAnswerTimeout","IncomingTimeout","OtherInstanceHandled","SignalingMessageFailed","ConnectionDropped","ClientInterrupted","WebRTCError","ClientError","NoPermission","OtherNotCapable","NoUIShown","VersionUnsupported","CallerNotVisible","CarrierBlocked","OtherCarrierBlocked","ClientEncryptionError","InactiveTimeout"],m=Object.freeze({CALL_INITIALIZATION_FAILED:"CollabCallInitializationFailed",CLOSED_AS_STALE:"CollabClosedAsStale",CLOSED_BY_MCU:"CollabClosedByMcu",INVALID_MEETING_ID:"CollabInvalidMeetingId",LOST_MCU_CONNECTION:"CollabLostMcuConnection",LOST_MCU_THRIFT_CONNECTION:"CollabLostMcuThriftConnection",LOST_SIP_ADAPTER_CONNECTION:"CollabLostSipAdapterConnection",MCU_INVALID_STREAM_CONFIGURATION:"CollabMcuInvalidStreamConfiguration",MCU_NO_AUDIO_STREAM:"CollabMcuNoAudioStream",REMOTE_PEER_HANGUP:"CollabRemotePeerHangup",REMOTE_PEER_REJECT:"CollabRemotePeerReject",SIP_CONNECTION_INITIALIZATION_FAILED:"CollabSipConnectionInitializationFailed",UNKNOWN:"CollabUnknown"}),n=Object.freeze({TOGGLE_SELF_VIEW:5,SUBMIT_STAR_RATING:6,SUBMIT_FEEDBACK:7,START_CALL:9,OPEN_SCREEN_IN_NEW:10}),o=Object.freeze({ONE_HOUR:"1hour",UNTIL_EIGHT_AM:"8am",ALWAYS:"always"});b=b("keyMirror")({AUDIO:null,VIDEO:null});var p=Object.freeze({CUSTOM:"custom",MULTIWAY:"multiway",P2P:"p2p"}),q=Object.freeze({DOMINANT_SPEAKER:"DOMINANT_SPEAKER",GRID:"GRID"});o={CallBlockingConstants:o,CallEndReason:k,CallType:d,ChildWindowMessageType:c,CollabCallEndSubreason:m,GroupVideoViewLayout:q,IncomingCallDialogTypes:b,PayloadType:a,RTCConstraints:j,SignalingProtocol:p,StreamType:h,UIEventType:n,UploadLogLevel:g,VideoQuality:i,MediaContentTypes:f,convertFromUploadLogLevel:function(a){switch(a){case g.LL_DEBUG:return"d";case g.LL_BASIC:return"b";case g.LL_WARNING:return"w";case g.LL_INFO:return"i";case g.LL_VERBOSE:return"v";case g.LL_NONE:default:return null}},convertToUploadLogLevel:function(a){switch(a){case"d":return g.LL_DEBUG;case"b":return g.LL_BASIC;case"w":return g.LL_WARNING;case"i":return g.LL_INFO;case"v":return g.LL_VERBOSE;default:return g.LL_NONE}},uploadLogLevelString:function(a){switch(a){case g.LL_BASIC:return"basic";case g.LL_DEBUG:return"debug";case g.LL_WARNING:return"warning";case g.LL_INFO:return"info";case g.LL_VERBOSE:return"verbose";default:return""}},endCallReasonFromString:function(a){return l.indexOf(a)},callEndReasonString:function(a){a=l[a];return!a?"Unknown":a},fullCallEndReasonString:function(a,b){return this.callEndReasonString(a)+"_"+(b?"remote":"local")}};e.exports=o}),null);
__d("FBRTCIceStatsParser",[],(function(a,b,c,d,e,f){__p&&__p();var g=null;h.getInstance=function(){"use strict";g||(g=new h());return g};h.prototype.extractIceInfo=function(a){"use strict";var b=[];a=a.split("\r\n");for(var c=0;c<a.length;c++){var d=a[c];this.$1(d)&&b.push({gen:this.$2(d),type:this.$3(d)})}return b};h.prototype.$1=function(a){"use strict";return a.indexOf("candidate:")>-1};h.prototype.$2=function(a){"use strict";var b=0;a=a.match(/generation (\d+)/);a&&(b=parseInt(a[1],10));return b};h.prototype.$3=function(a){"use strict";a=a.match(/typ (host|relay|srflx|prflx)/);if(a)return a[1];else return"unknown"};function h(){"use strict"}e.exports=h}),null);
__d("FBRTCLocalUploadLogLevel",["CurrentUser","FBRTCConstants"],(function(a,b,c,d,e,f){"use strict";var g=b("FBRTCConstants").UploadLogLevel,h={getUploadLogLevel:function(a){return Math.max(h.getLocalUploadLogLevel(),a)},getLocalUploadLogLevel:function(){return b("CurrentUser").isEmployee()?g.LL_DEBUG:g.LL_NONE}};e.exports=h}),null);
__d("IntlDateStringsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:IntlDateStringsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:IntlDateStringsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:IntlDateStringsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setDatetimeFormat=function(a){this.$1.datetime_format=a;return this};a.prototype.setDatetimeInsideSentence=function(a){this.$1.datetime_inside_sentence=a;return this};a.prototype.setLoggedFromClient=function(a){this.$1.logged_from_client=a;return this};a.prototype.setTargetLocale=function(a){this.$1.target_locale=a;return this};c={datetime_format:!0,datetime_inside_sentence:!0,logged_from_client:!0,target_locale:!0};e.exports=a}),null);
__d("IntlDateCLDRCategory",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DATE_FORMATS:"dateFormats",TIME_FORMATS:"timeFormats",DATE_TIME_FORMATS:"dateTimeFormats",AVAILABLE_FORMATS:"availableFormats"})}),null);
__d("IntlDateFormatsCLDRWidthEnum",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FULL:"full",LONG:"long",MEDIUM:"medium",SHORT:"short"})}),null);
__d("getCLDRLocalizedFormat",["CLDRDateFormatConfig","FBLogger","IntlDateCLDRCategory","IntlDateFormatsCLDRWidthEnum","ex","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("CLDRDateFormatConfig").CLDRConfigeratorFormats;function a(a){__p&&__p();if(a==null)throw new Error(b("ex")('Format: "%s", not supported by configurator.',a));var c,d=a.split("_"),e=d[0];d=d.slice(1);var f=e+"Formats";switch(f){case b("IntlDateCLDRCategory").DATE_FORMATS:case b("IntlDateCLDRCategory").TIME_FORMATS:var j=h(d[0]);if(j==null)throw new Error(b("ex")('Format: "%s", category: "%s", with unsupported width: "%s"',a,f,j));c=g[f][j];if(c==null)throw new Error(b("ex")('Format: "%s", category: "%s", width: "%s", with unsupported localization',a,f,j));break;case b("IntlDateCLDRCategory").DATE_TIME_FORMATS:j=h(d[0]);d=h(d[1]);if(j==null||d==null)throw new Error(b("ex")('Format: "%s", category: "%s", with unsupported width: "%s" or "%s"',a,f,j,d));c=g[f][j];var k=g.dateFormats[j],l=g.timeFormats[d];if(c==null)throw new Error(b("ex")('Format: "%s", category: "%s", date width: "%s", and time width: "%s", with unsupported localization',a,f,j,d));c=c.replace("{0}",l).replace("{1}",k);break;default:f=b("IntlDateCLDRCategory").AVAILABLE_FORMATS;j=e;j.includes("j")&&(j=i(j));c=g[f][j];if(c==null)throw new Error(b("ex")('Format: "%s", with key: "%s", not supported by CLDR',a,j))}return c}function h(a){return b("IntlDateFormatsCLDRWidthEnum")[b("nullthrows")(a,"Expected CLDR width key to not be null").toUpperCase()]}function i(a){var c,d=g.timeFormats["short"];d==null?(b("FBLogger")("formatDate").blameToPreviousFile().warn('CLDR `timeFormat`, width `short` required for 24 hour localization not found for availableKey: "%s"',a),c="h"):c=d.includes("H")?"H":"h";return a.replace("j",c)}e.exports=a}),null);
__d("intlGetDateNumerics",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){b.utc===!0?b={dateDay:a.getUTCDate(),dateDayOfWeek:a.getUTCDay(),dateMonth:a.getUTCMonth(),dateYear:a.getUTCFullYear(),dateHours:a.getUTCHours(),dateMinutes:a.getUTCMinutes(),dateSeconds:a.getUTCSeconds(),dateMilliseconds:a.getUTCMilliseconds()}:b={dateDay:a.getDate(),dateDayOfWeek:a.getDay(),dateMonth:a.getMonth(),dateYear:a.getFullYear(),dateHours:a.getHours(),dateMinutes:a.getMinutes(),dateSeconds:a.getSeconds(),dateMilliseconds:a.getMilliseconds()};return b}e.exports=a}),null);
__d("DateStrings",["fbt"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i,j,k,l,m,n,o,p,q={getWeekdayName:function(a){m||(m=[g._("Sunday"),g._("Monday"),g._("Tuesday"),g._("Wednesday"),g._("Thursday"),g._("Friday"),g._("Saturday")]);return m[a]},getUppercaseWeekdayName:function(a){o||(o=[g._("SUNDAY"),g._("MONDAY"),g._("TUESDAY"),g._("WEDNESDAY"),g._("THURSDAY"),g._("FRIDAY"),g._("SATURDAY")]);return o[a]},getWeekdayNameShort:function(a){n||(n=[g._("Sun"),g._("Mon"),g._("Tue"),g._("Wed"),g._("Thu"),g._("Fri"),g._("Sat")]);return n[a]},getUppercaseWeekdayNameShort:function(a){p||(p=[g._("SUN"),g._("MON"),g._("TUE"),g._("WED"),g._("THU"),g._("FRI"),g._("SAT")]);return p[a]},_initializeMonthNames:function(){h=[g._("January"),g._("February"),g._("March"),g._("April"),g._("May"),g._("June"),g._("July"),g._("August"),g._("September"),g._("October"),g._("November"),g._("December")]},getMonthName:function(a){h||q._initializeMonthNames();return h[a-1]},getMonthNames:function(){h||q._initializeMonthNames();return h.slice()},getUppercaseMonthName:function(a){k||(k=[g._("JANUARY"),g._("FEBRUARY"),g._("MARCH"),g._("APRIL"),g._("MAY"),g._("JUNE"),g._("JULY"),g._("AUGUST"),g._("SEPTEMBER"),g._("OCTOBER"),g._("NOVEMBER"),g._("DECEMBER")]);return k[a-1]},getMonthNameShort:function(a){i||(i=[g._("Jan"),g._("Feb"),g._("Mar"),g._("Apr"),g._("May"),g._("Jun"),g._("Jul"),g._("Aug"),g._("Sep"),g._("Oct"),g._("Nov"),g._("Dec")]);return i[a-1]},getUppercaseMonthNameShort:function(a){j||(j=[g._("JAN"),g._("FEB"),g._("MAR"),g._("APR"),g._("MAY"),g._("JUN"),g._("JUL"),g._("AUG"),g._("SEP"),g._("OCT"),g._("NOV"),g._("DEC")]);return j[a-1]},getOrdinalSuffix:function(a){l||(l=["",g._("st"),g._("nd"),g._("rd"),g._("th"),g._("th"),g._("th"),g._("th"),g._("th"),g._("th"),g._("th"),g._("th"),g._("th"),g._("th"),g._("th"),g._("th"),g._("th"),g._("th"),g._("th"),g._("th"),g._("th"),g._("st"),g._("nd"),g._("rd"),g._("th"),g._("th"),g._("th"),g._("th"),g._("th"),g._("th"),g._("th"),g._("st")]);return l[a]},getDayOfMonth:function(a){__p&&__p();switch(a){case 1:return g._("1st");case 2:return g._("2nd");case 3:return g._("3rd");case 4:return g._("4th");case 5:return g._("5th");case 6:return g._("6th");case 7:return g._("7th");case 8:return g._("8th");case 9:return g._("9th");case 10:return g._("10th");case 11:return g._("11th");case 12:return g._("12th");case 13:return g._("13th");case 14:return g._("14th");case 15:return g._("15th");case 16:return g._("16th");case 17:return g._("17th");case 18:return g._("18th");case 19:return g._("19th");case 20:return g._("20th");case 21:return g._("21st");case 22:return g._("22nd");case 23:return g._("23rd");case 24:return g._("24th");case 25:return g._("25th");case 26:return g._("26th");case 27:return g._("27th");case 28:return g._("28th");case 29:return g._("29th");case 30:return g._("30th");case 31:return g._("31st");default:throw new Error("Invalid day of month.")}},getDayLabel:function(){return g._("Day:")},getMonthLabel:function(){return g._("Month:")},getYearLabel:function(){return g._("Year:")},getHourLabel:function(){return g._("Hour:")},getMinuteLabel:function(){return g._("Minute:")},getDayPlaceholder:function(){return g._("dd")},getMonthPlaceholder:function(){return g._("mm")},getYearPlaceholder:function(){return g._("yyyy")},getHourPlaceholder:function(){return g._("h")},getMinutePlaceholder:function(){return g._("m")},get12HourClockSuffix:function(a){return a<12?g._("am"):g._("pm")},getUppercase12HourClockSuffix:function(a){return a<12?g._("AM"):g._("PM")}};e.exports=q}),null);
__d("padNumber",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a=a.toString();return a.length>=b?a:"0".repeat(b-a.length)+a}e.exports=a}),null);
__d("intlRenderJSDateSymbol",["DateStrings","nullthrows","padNumber"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f){__p&&__p();f===void 0&&(f=0);var g="";switch(c){case"\\":f++;g=b("nullthrows")(e,"Only deprecated calls to `intlRenderJSDateSymbol()` use `localizedJSFormat`.").charAt(f);break;case"d":g=b("padNumber")(a.dateDay,2);break;case"j":g=a.dateDay;break;case"S":g=b("DateStrings").getOrdinalSuffix(a.dateDay);break;case"D":g=b("DateStrings").getWeekdayNameShort(a.dateDayOfWeek);break;case"l":g=b("DateStrings").getWeekdayName(a.dateDayOfWeek);break;case"F":case"f":g=b("DateStrings").getMonthName(a.dateMonth+1);break;case"M":g=b("DateStrings").getMonthNameShort(a.dateMonth+1);break;case"m":g=b("padNumber")(a.dateMonth+1,2);break;case"n":g=a.dateMonth+1;break;case"Y":g=a.dateYear;break;case"y":g=(""+a.dateYear).slice(2);break;case"a":d.skipSuffixLocalization?g=a.dateHours<12?"am":"pm":g=b("DateStrings").get12HourClockSuffix(a.dateHours);break;case"A":d.skipSuffixLocalization?g=a.dateHours<12?"AM":"PM":g=b("DateStrings").getUppercase12HourClockSuffix(a.dateHours);break;case"g":a.dateHours===0||a.dateHours===12?g="12":g=a.dateHours%12;break;case"G":g=a.dateHours;break;case"h":a.dateHours===0||a.dateHours===12?g="12":g=b("padNumber")(a.dateHours%12,2);break;case"H":g=b("padNumber")(a.dateHours,2);break;case"i":g=b("padNumber")(a.dateMinutes,2);break;case"s":g=b("padNumber")(a.dateSeconds,2);break;case"X":g=b("padNumber")(a.dateMilliseconds,3);break;default:g=c}return{idx:f,rendered:String(g)}}e.exports=a}),null);
__d("intlRenderCLDRDate",["CLDRDateFormatConfig","ex","intlRenderJSDateSymbol"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=/\w+/;function a(a,c,d){__p&&__p();var e=b("CLDRDateFormatConfig").intlDateSpecialChars,f="",g="",i=!1,j=[],k;a=a.split(e.cldrDelimiter+e.singleQuote).join(e.singleQuoteHolder);for(var l=0,m=a.length;l<m;l++){var n=a.charAt(l);!i?n===e.cldrDelimiter?i=!0:f.length===0||f[0]===n?f+=n:n===e.singleQuoteHolder?f+=e.singleQuote:(k=h(f,d,c),j.push(k.rendered),f=n):(f.length!==0&&(k=h(f,d,c),j.push(k.rendered),f=""),n===e.cldrDelimiter?(i=!1,j.push(g),g=""):n===e.singleQuoteHolder?g+=e.singleQuote:g+=n)}if(g.length!==0)throw new Error(b("ex")('Format: "%s" must contain closing str literal delimiter',a));f.length!==0&&(k=h(f,d,c),j.push(k.rendered));return j.join("")}function h(a,c,d){a=i(a);return b("intlRenderJSDateSymbol")(c,a,d)}function i(a){if(a in b("CLDRDateFormatConfig").CLDRToPHPSymbolConversion)return b("CLDRDateFormatConfig").CLDRToPHPSymbolConversion[a];if(g.test(a))throw new Error(b("ex")('Unsupported CLDR symbol: "%s". If string literal, wrap in delimiters',a));return a}e.exports=a}),null);
__d("formatDate",["invariant","CLDRDateFormatConfig","CLDRDateRenderingClientRollout","DateFormatConfig","FBLogger","IntlDateStringsTypedLogger","Random","getCLDRLocalizedFormat","gkx","intlGetDateNumerics","intlRenderCLDRDate","intlRenderJSDateSymbol"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=Object.freeze({today:null,yesterday:null,thisWeek:null,thisMonth:null,thisYear:null,withinDay:null,withinWeek:null,withinMonth:null,withinYear:null,older:null,future:null});h.DEFAULT_FORMAT="m/d/Y g:ia";h.periodNames=Object.freeze(Object.keys(a));function h(a,c,d){__p&&__p();d=d||{};if(!c||!a&&a!==0)return"";typeof a==="string"&&(a=parseInt(a,10));typeof a==="number"&&(a=new Date(a*1e3));a instanceof Date||g(0,214);isNaN(a.getTime())&&g(0,215);a.getTime()>=1e15&&b("FBLogger")("i18n-formatDate").blameToPreviousFile().info("The date passed to formatDate is too far in the future. Did you mix up milliseconds/seconds?");if(typeof c==="object"){var e=a.getTime(),f=j();for(var l=0;l<f.length;l++){var m=f[l],n=c[m.name];if(n!=null&&m.start<=e&&e<m.end){c=n;break}}}typeof c!=="string"&&(c=h.DEFAULT_FORMAT,b("FBLogger")("i18n-formatDate").blameToPreviousFile().warn("called with invalid format for %s, using default: %s",a.getTime(),c));m=b("intlGetDateNumerics")(a,d);if(d.skipPatternLocalization||!d.formatInternal&&k())n=c;else if(!b("DateFormatConfig").formats[c])c.length===1||g(0,216,c),n=c;else{b("Random").random()<b("CLDRDateRenderingClientRollout").formatDateClientLoggerSamplingRate&&new(b("IntlDateStringsTypedLogger"))().setDatetimeFormat(c).setLoggedFromClient(!0).log();if(b("gkx")("676840")&&c in b("CLDRDateFormatConfig").supportedPHPFormatsKeys)try{f=b("CLDRDateFormatConfig").supportedPHPFormatsKeys[c];l=b("getCLDRLocalizedFormat")(f);return b("intlRenderCLDRDate")(l,d,m)}catch(a){b("FBLogger")("i18n-formatDate").blameToPreviousFile().catching(a).mustfix("CLDR date format render error");if(d.throwCLDRError)throw a}n=b("DateFormatConfig").formats[c]}return i(n,d,m)}function i(a,c,d){var e=[];for(var f=0;f<a.length;f++){var g=a.charAt(f);g=b("intlRenderJSDateSymbol")(d,g,c,a,f);e.push(g.rendered);f=g.idx}return e.join("")}function j(){var a=new Date(),c=a.getTime(),d=a.getFullYear(),e=a.getMonth(),f=new Date(d,a.getMonth()+1,0).getDate(),g=new Date(d,1,29).getMonth()===1?366:365,h=1e3*60*60*24,i=new Date(a.setHours(0,0,0,0)),j=new Date(d,e,i.getDate()+1);a=a.getDate()-(a.getDay()-b("DateFormatConfig").weekStart+6)%7;var k=new Date(c).setDate(a);a=new Date(c).setDate(a+7);var l=new Date(d,e,1);e=new Date(d,e,f+1);var m=new Date(d,0,1);d=new Date(d+1,0,1);return[{name:"today",start:i.getTime(),end:j.getTime()},{name:"withinDay",start:c-h,end:c+h},{name:"yesterday",start:i.getTime()-h,end:i.getTime()-1},{name:"thisWeek",start:k,end:a},{name:"withinWeek",start:c-h*7,end:c+h*7},{name:"thisMonth",start:l.getTime(),end:e.getTime()},{name:"withinMonth",start:c-h*f,end:c+h*f},{name:"thisYear",start:m.getTime(),end:d.getTime()},{name:"withinYear",start:c-h*g,end:c+h*g},{name:"older",start:-Infinity,end:c},{name:"future",start:c,end:+Infinity}]}function k(){var a;a=(a=window)!=null?(a=a.location)!=null?a.pathname:a:a;return a&&a.startsWith("/intern")||!1}e.exports=h}),null);
__d("FBRTCConsoleLogger",["Log","LogHistory","formatDate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null;h.getInstance=function(){g||(g=new h());return g};function h(){this.$1=b("LogHistory").getInstance(h.MODULE_NAME)}h.prototype.getLogHistory=function(){return this.$1};h.prototype.log=function(a,b,c,event,d){event===void 0&&(event="Console");d===void 0&&(d="DEBUG");d=" "+JSON.stringify({conferenceName:b,callID:c});this.$1.log(event||"Console",a+d);return this};h.MODULE_NAME="webrtc";e.exports=h}),null);
__d("P2PReliabilityTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:P2PReliabilityLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:P2PReliabilityLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:P2PReliabilityLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAppBuildNumber=function(a){this.$1.app_build_number=a;return this};a.prototype.setAppID=function(a){this.$1.app_id=a;return this};a.prototype.setAppVersion=function(a){this.$1.app_version=a;return this};a.prototype.setCallID=function(a){this.$1.call_id=a;return this};a.prototype.setDeviceID=function(a){this.$1.device_id=a;return this};a.prototype.setEventName=function(a){this.$1.event_name=a;return this};a.prototype.setExtra=function(a){this.$1.extra=a;return this};a.prototype.setMsgID=function(a){this.$1.msg_id=a;return this};a.prototype.setMsgType=function(a){this.$1.msg_type=a;return this};a.prototype.setProcessingTimeSinceRecvOnWww=function(a){this.$1.processing_time_since_recv_on_www=a;return this};a.prototype.setRawTime=function(a){this.$1.raw_time=a;return this};a.prototype.setReceiverID=function(a){this.$1.receiver_id=a;return this};a.prototype.setResultCode=function(a){this.$1.result_code=a;return this};a.prototype.setSenderID=function(a){this.$1.sender_id=a;return this};a.prototype.setServiceName=function(a){this.$1.service_name=a;return this};a.prototype.setUserCountry=function(a){this.$1.user_country=a;return this};c={app_build_number:!0,app_id:!0,app_version:!0,call_id:!0,device_id:!0,event_name:!0,extra:!0,msg_id:!0,msg_type:!0,processing_time_since_recv_on_www:!0,raw_time:!0,receiver_id:!0,result_code:!0,sender_id:!0,service_name:!0,user_country:!0};e.exports=a}),null);
__d("RTWebLoggingSharedInstance",["CurrentUser","UserAgentData"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null;h.getInstance=function(){g==null&&(g=new h());return g};function h(){this.$1=b("UserAgentData").browserName+b("CurrentUser").getID().substr(-4)+"_"+Date.now().toString().substr(-5)}h.prototype.getDeviceID=function(){return this.$1};e.exports=h}),null);
__d("FBRTCLogger",["ChannelManager","FBRTCConsoleLogger","FBRTCMessageType","MarauderLogger","P2PReliabilityTypedLogger","RTWebLoggingSharedInstance","UserAgentData","CurrentUser","pageID"],(function(a,b,c,d,e,f){__p&&__p();var g=b("CurrentUser").getID(),h="call_action",i="rtc_client_call_summary",j="client_error",k="client_event",l="info",m="received_message",n="send_failed",o="send_succeeded",p="sent_message",q=null;r.getInstance=function(){"use strict";q==null&&(q=new r());return q};r.multiwayMessageTypeName=function(a){"use strict";__p&&__p();switch(a){case b("FBRTCMessageType").JOIN:return"JOIN";case b("FBRTCMessageType").SERVER_MEDIA_UPDATE:return"SERVER_MEDIA_UPDATE";case b("FBRTCMessageType").HANGUP:return"HANGUP";case b("FBRTCMessageType").ICE_CANDIDATE:return"ICE_CANDIDATE";case b("FBRTCMessageType").RING:return"RING";case b("FBRTCMessageType").DISMISS:return"DISMISS";case b("FBRTCMessageType").CONFERENCE_STATE:return"CONFERENCE_STATE";case b("FBRTCMessageType").ADD_PARTICIPANTS:return"ADD_PARTICIPANTS";case b("FBRTCMessageType").SUBSCRIPTION:return"SUBSCRIPTION";case b("FBRTCMessageType").CLIENT_MEDIA_UPDATE:return"CLIENT_MEDIA_UPDATE";case b("FBRTCMessageType").DATA_MESSAGE:return"DATA_MESSAGE";case b("FBRTCMessageType").REMOVE_PARTICIPANTS:return"REMOVE_PARTICIPANTS";case b("FBRTCMessageType").EXPERIMENT:return"EXPERIMENT";case b("FBRTCMessageType").CONNECT:return"CONNECT";case b("FBRTCMessageType").APPROVAL:return"APPROVAL"}return a.toString()};function r(){"use strict";this.$2=JSON.stringify({version:2,device:b("UserAgentData").deviceName,os:b("UserAgentData").platformName,os_version:b("UserAgentData").platformFullVersion,browser:b("UserAgentData").browserName,browser_version:b("UserAgentData").browserFullVersion}),this.$3=JSON.stringify({version:2,device:b("UserAgentData").deviceName,os:b("UserAgentData").platformName,os_version:b("UserAgentData").platformFullVersion,browser:b("UserAgentData").browserName,browser_version:b("UserAgentData").browserFullVersion,msg_source:"web"}),this.$1=b("RTWebLoggingSharedInstance").getInstance().getDeviceID()}r.prototype.logToConsole=function(a){"use strict";this.$4(null,null,"Console",a)};r.prototype.$5=function(a){"use strict";return new(b("P2PReliabilityTypedLogger"))().setExtra(this.$2).setDeviceID(this.$1).setRawTime(Date.now()).setServiceName("WEB_CLIENT").setMsgType(a.toUpperCase())};r.prototype.logMultiwayMessageReceived=function(a,b){"use strict";var c=r.multiwayMessageTypeName(a.type());this.$4(a.conferenceName(),b,"Received MW",c+", "+a.transactionId(),c==="EXPERIMENT"?"DEBUG":"INFO")};r.prototype.logReceivedMessage=function(a,b,c){"use strict";var d=b?b.toString():null,e={call_id:b,from:a,msg_id:c.msg_id,type:c.type};c.sdp&&(e.content=c.sdp);c.ack_id&&(e.ack_msg_id=c.ack_id);var f=c.type||c.msgType;this.$5(f).setEventName("CLIENT_RECEIVED_MESSAGE").setCallID(d).setMsgID(c.msg_id).setSenderID(a).setReceiverID(g).setExtra(this.$3).log();this.$6(m,e);this.$4(a,b,"Received P2P",c.type+", "+c.msg_id)};r.prototype.logSentMessage=function(a,b,c){"use strict";var d=b?b.toString():null,e={call_id:b,msg_id:c.msg_id,to:a,type:c.type};c.sdp&&(e.content=c.sdp);c.ack_id&&(e.ack_msg_id=c.ack_id);this.$5(c.type).setEventName("CLIENT_SENDING_MESSAGE").setCallID(d).setMsgID(c.msg_id).setSenderID(g).setReceiverID(a).log();this.$6(p,e);this.$4(a,b,"Sent",c.type+", "+c.msg_id)};r.prototype.logSentMessageSuccess=function(a,b,c,d){"use strict";var e={call_id:b,msg_id:d,peer_id:a,type:c};b=b?b.toString():null;this.$5(c).setEventName("CLIENT_TRANSPORT_SUCCESS").setCallID(b).setMsgID(d.toString()).setSenderID(g).setReceiverID(a).log();this.$6(o,e)};r.prototype.logSentMessageFailure=function(a,b,c,d,e){"use strict";var f={call_id:b,error_code:e,msg_id:d,peer_id:a,type:c},h=b?b.toString():null;this.$5(c).setEventName("CLIENT_TRANSPORT_ERROR").setCallID(h).setMsgID(d.toString()).setSenderID(a).setSenderID(g).setReceiverID(a).setResultCode(e).log();this.$6(n,f);this.$4(a,b,"Send Failed",c+", "+e)};r.prototype.logCallAction=function(a,b,c,d,e){"use strict";var f={call_action:c,call_id:b,content:d,peer_id:a};e&&(f.trigger=e);this.$6(h,f);this.$4(a,b,"CallAction",c+", "+JSON.stringify(d))};r.prototype.logEvent=function(a,b,event){"use strict";var c={call_id:b,content:event,peer_id:a};this.$6(k,c);this.$4(a,b,"Event",JSON.stringify(event))};r.prototype.logInfo=function(a,b,c){"use strict";var d={call_id:b,content:c,peer_id:a};this.$6(l,d);this.$4(a,b,"Info",JSON.stringify(c))};r.prototype.logError=function(a,b,c){"use strict";var d={call_id:b,content:c,peer_id:a};this.$6(j,d);this.$4(a,b,"Error",JSON.stringify(c))};r.prototype.logErrorWithoutID=function(a){"use strict";this.logError(null,null,a)};r.prototype.logEndCallSummary=function(a){"use strict";if(!a)return;var c={call_id:a.callID,channel_session_id:b("ChannelManager").getCompleteConfig().sessionID,content:a.toString(),peer_id:a.peerID,tag:"endcallstats"},d=babelHelpers["extends"]({},c,a.getExtraInfo());this.$6(i,d);this.$4(a.peerID,a.callID,"Call Summary",JSON.stringify(c))};r.prototype.$6=function(a,c){"use strict";c.page_id=b("pageID"),b("FBRTCConsoleLogger").getInstance().getLogHistory().log(a,c),b("MarauderLogger").log(a,b("FBRTCConsoleLogger").MODULE_NAME,c)};r.prototype.$4=function(a,c,d,e,f){f===void 0&&(f="DEBUG"),b("FBRTCConsoleLogger").getInstance().log(e,a,c,d,f)};r.CallAction=Object.freeze({ANSWER_CALL:"answer_call",AUTO_DISABLE_VIDEO:"auto_disable_video",DENIED_PERMISSION:"denied_permission",END_CALL:"end_call",FAILED_GETTING_URI:"failed_getting_uri",OLD_URI:"old_uri",OPEN_POPUP:"open_popup",POPUP_OPENED:"popup_opened",RECEIVED_CALL:"received_call",SET_FULLSCREEN_ON:"set_fullscreen_on",SET_MUTE:"set_mute",SET_SELF_VIEW_ON:"set_self_view_on",SET_VIDEO_ON:"set_video_on",START_CALL:"start_call",START_SKYPE:"start_skype",TRY_NEW:"try_new",USER_SETTINGS_CHANGED:"user_settings_changed"});r.Trigger=Object.freeze({ADMIN_MESSAGE:"admin_message",CHAT_TAB_ICON_TOUR:"chat_tab_icon_tour",CHAT_TAB_ICON:"chat_tab_icon",CHAT_TAB_VOICE_ICON:"chat_tab_voice_icon",MULTIWAY_CHAT_TAB_SHEET_JOIN_CALL_BUTTON:"multiway_chat_tab_sheet_join_call_button",MULTIWAY_POPUP_START_CALL_BUTTON:"multiway_popup_start_call_button",MULTIWAY_THREAD_HEADER_AUDIO_BUTTON:"multiway_thread_header_audio_button",MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:"multiway_thread_header_join_audio_call_audio_button",MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:"multiway_thread_header_join_audio_call_video_button",MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON:"multiway_thread_header_join_video_call_audio_button",MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON:"multiway_thread_header_join_video_call_video_button",MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:"multiway_thread_header_video_button",MULTIWAY_THREAD_LIST_JOIN_CALL_BUTTON:"multiway_thread_list_join_call_button",POPUP_CALL_START_BUTTON:"popup_start_call_button",REDIAL_BUTTON:"redial_button",RESET_CALL:"install_screen_sharing_ext_dialog",RETURN_CALL:"return_call",SKYPE_DEPRECATION_DIALOG:"skype_deprecation_dialog",TIMELINE_PROFILE:"timeline_profile",VC_PRECALL_SETUP:"vc_precall_setup",UNKNOWN:"unknown",WEB_MESSENGER:"web_messenger"});r.Key=Object.freeze({BATTERY_START:"battery_start",BATTERY_END:"battery_end",CALL_TYPE:"call_type",CONNECTION_EFFECTIVE_TYPE:"conn_effective_type",CPU_CORES:"cpu_cores",DEVICE_INFO:"device_info",DEVICE_MEMORY:"device_memory",DEVICE_PIXEL_RATIO:"device_pixel_ratio",INITIATED_BY_PAGE_ID:"initiated_by_page_id",PEER_IS_MOBILE:"peer_is_mobile",RATING_SHOWN:"rating_shown",RATING:"rating5",EFFECT_COUNT:"rtc_effect_count",EFFECT_TOTAL_DURATION:"rtc_effect_total_duration",VIDEO_DURATION_WITH_FILTER:"rtc_video_duration_with_filter_enabled",SCREEN_DURATION:"screen_duration",SURVEY_CHOICE:"survey_choice",SURVEY_DETAILS:"survey_details",SURVEY_SHOWN:"survey_shown",MEDIA_INPUTS:"media_inputs",VIDEO_CAPABILITIES:"video_capabilities"});e.exports=r}),null);
__d("FBRTCMediaMetricTracker",["performanceNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={count:0,current:-1,first:-1,min:-1,max:-1,mean:-1,median:-1,startedTime:-1,total:-1,updatedTime:-1};function h(){this.$1={},this.$2={},this.$3={}}h.prototype.getVideoStreamReportKeys=function(){return Object.keys(this.$3)};h.prototype.getJitterStreamReportKey=function(){return Object.keys(this.$1)};h.prototype.getAudioStreamReportKeys=function(){return Object.keys(this.$2)};h.prototype.addJitterBufferDelay=function(a,b){b!==null&&b!==undefined&&(this.$1[a]||(this.$1[a]=[]),this.$1[a].push(b))};h.prototype.setVideoMetric=function(a,b,c){c!==null&&c!==undefined&&(this.$3[a]||(this.$3[a]={}),this.$3[a][b]=this.$4(this.$3[a][b],c))};h.prototype.$4=function(a,c){__p&&__p();if(a!==null&&a!==undefined){a.current=c;a.updatedTime=b("performanceNow")();a.total+=c;a.count+=1;a.min=Math.min(a.min,c);a.max=Math.max(a.max,c);a.mean=a.total/a.count;return a}else return{min:c,max:c,total:c,count:1,mean:c,first:c,startedTime:b("performanceNow")(),current:c,updatedTime:b("performanceNow")()}};h.prototype.getVideoMetric=function(a,b){return this.$3[a]?this.$3[a][b]:null};h.prototype.addMetricStat=function(a,b,c){c!==null&&c!==undefined&&(this.$2[a]||(this.$2[a]={}),this.$2[a][b]=this.$4(this.$2[a][b],c))};h.prototype.getMetricStats=function(a,b){return!this.$2[a]?null:this.$2[a][b]};h.prototype.getJitterBufferStats=function(a){__p&&__p();if(!this.$1[a])return g;var b=this.$1[a].length;if(b===0)return g;this.$1[a].sort(function(a,b){return a-b});var c=this.$1[a].reduce(function(a,b){return a+b});if(b%2===0){var d=Math.floor((b-1)/2),e=Math.ceil((b-1)/2);d=(this.$1[a][d]+this.$1[a][e])/2}else d=this.$1[a][(b-1)/2];return{max:this.$1[a][b-1],min:this.$1[a][0],mean:c/b,median:d,total:c,count:b,first:-1,startedTime:-1,current:-1,updatedTime:-1}};h.prototype.toJsonString=function(){return JSON.stringify({stats:this.$2,jitterBufferDelays:this.$1,videoMetric:this.$3})};h.fromJsonString=function(a){var b=new h();try{a=JSON.parse(a),a=a}catch(a){return b}a.stats&&(b.$2=a.stats);a.jitterBufferDelays&&(b.$1=a.jitterBufferDelays);a.videoMetric&&(b.$3=a.videoMetric);return b};e.exports=h}),null);
__d("FBRTCMediaMetricsConst",[],(function(a,b,c,d,e,f){"use strict";a={JITTER:"jitter",ACCELERATE_RATE:"accelerate_rate",DECODING_CNG:"decoding_cng",DECODING_NORMAL:"decoding_normal",DECODING_PLC:"decoding_plc",DECODING_PLC_CNG:"decoding_plc_cng",DISCARD_RATE:"discard_rate",EXPAND_RATE:"expand_rate",PREEMPTIVE_RATE:"preemptive_rate",AUDIO_PACKETS_RECEIVED:"audio_packets_received",AUDIO_PACKETS_RECEIVED_LOST:"audio_packets_received_lost",AUDIO_PACKETS_SENT:"audio_packets_sent",AUDIO_PACKETS_SENT_LOST:"audio_packets_sent_lost",VIDEO_BYTES_RECEIVED:"video_bytes_received",VIDEO_BYTES_SENT:"video_bytes_sent",INBOUND_QP:"inbound_qp",OUTBOUND_QP:"outbound_qp",FRAMES_ENCODED:"frames_encoded",FRAMES_DECODED:"frames_decoded",VIDEOBWE_SEND_BANDWIDTH:"videobwe_send_bandwidth",VIDEOBWE_TRANSMIT_BITRATE:"videobwe_transmit_bitrate",VIDEOBWE_RETRANSMIT_BITRATE:"videobwe_retransmit_bitrate",AUDIO_BYTES_SENT:"audio_bytes_sent",AUDIO_BYTES_RECEIVED:"audio_bytes_received",VIDEO_PKTS_SENT:"video_pkts_sent",VIDEO_PKTS_SEND_LOST:"video_pkts_send_lost",VIDEO_PKTS_RECEIVED:"video_pkts_received",VIDEO_PKTS_RECV_LOST:"video_pkts_receive_lost",AUDIO_RTT_RECEIVED:"audio_rtt_received",AUDIO_RTT_SENT:"audio_rtt_sent"};e.exports=a}),null);
__d("FBRTCCallSummary",["FBRTCConstants","FBRTCIceStatsParser","FBRTCLocalUploadLogLevel","FBRTCLogger","FBRTCMediaMetricsConst","FBRTCMediaMetricTracker","SiteData","UserAgentData","gkx","performanceNow"],(function(a,b,c,d,e,f){__p&&__p();var g=5*60*1e3,h={CALL_STARTED:"started",SENT_OFFER:"s_o",RECV_OFFER:"r_o",SENT_OFFER_ACK:"s_oack",RECV_OFFER_ACK:"r_oack",SENT_RETRIED_OFFER:"s_o2",RECV_RETRIED_OFFER:"r_o2",SENT_RETRIED_OFFER_ACK:"s_oack2",RECV_RETRIED_OFFER_ACK:"r_oack2",SENT_PRANSWER:"s_pr",RECV_PRANSWER:"r_pr",NETWORK_READY:"network_ready",SENT_ANSWER:"s_a",RECV_ANSWER:"r_a",SENT_ANSWER_ACK:"s_aack",RECV_ANSWER_ACK:"r_aack",SENT_RETRIED_ANSWER:"s_a2",RECV_RETRIED_ANSWER:"r_a2",SENT_RETRIED_ANSWER_ACK:"s_aack2",RECV_RETRIED_ANSWER_ACK:"r_aack2",SENT_OK:"s_ok",RECV_OK:"r_ok",CALL_CONNECTED:"connected",CALL_ENDED:"ended",SENT_JOIN_REQUEST:"s_jreq",RECV_JOIN_RESPONSE:"r_jresp",PROC_JOIN_RESPONSE:"p_jresp",RECV_RING_REQUEST:"r_rreq",SENT_RING_RESPONSE:"s_rresp"},i={FELLBACK_TO_AUDIO:"f_a",MEDIA_REQUESTED:"m_r",MEDIA_SUCCEEDED:"m_s",POPUP_OPENED:"opened",PRESSED_ANSWER:"p_a"},j={ESCALATION_IS_AVAILABLE:"esc_available",USER_INITIATED_REQUEST:"out_started",RECEIVED_INCOMING_REQUEST:"inc_started",REJECTED_INVALID_P2P_STATE:"rej_invalid_state",CONNECTING_TO_MULTIWAY:"u_connecting_mw",CONNECTED_TO_MULTIWAY:"u_connected_mw",PEER_CONNECTING_TO_MULTIWAY:"p_connecting_mw",PEER_CONNECTED_TO_MULTIWAY:"p_connected_mw",READY_TO_ESCALATE:"ready_esc",PEER_FAILED_TO_CONNECT_TO_MULTIWAY:"p_fail_conn",MULTIWAY_CALL_ENDED:"mw_call_ended",TIMED_OUT:"timed_out",PEER_ABORTED:"p_aborted",INTERNAL_ERROR:"internal_err"},k={ESCALATION_INITIATION_BUTTON_CLICKED:"esc_init_button",ESCALATION_APPROVED_BUTTON_CLICKED:"esc_appr_button",ESCALATION_DECLINED_BUTTON_CLICKED:"esc_decl_button",USERMEDIA_REQUEST:"media_req",USERMEDIA_SUCCESS:"media_success",USERMEDIA_FAILURE:"media_fail",SENT_ESC_REQUEST:"s_esc_req",RECV_ESC_REQUEST:"r_esc_req",SENT_ESC_REQUEST_ACK:"s_esc_req_ack",RECV_ESC_REQUEST_ACK:"s_esc_req_ack",SENT_ESC_RESPONSE:"s_esc_rep",RECV_ESC_ACCEPT:"r_esc_accept",RECV_ESC_DECLINE:"r_esc_decl",RECV_ESC_TIMEOUT:"r_esc_timeout"},l=[b("FBRTCMediaMetricsConst").ACCELERATE_RATE,b("FBRTCMediaMetricsConst").DISCARD_RATE,b("FBRTCMediaMetricsConst").EXPAND_RATE,b("FBRTCMediaMetricsConst").PREEMPTIVE_RATE];m.nullSummary=function(){"use strict";return new m({peerID:"0",callID:"0",isCaller:!1,callTrigger:"NULL_SUMMARY"})};function m(a){"use strict";this.peerID=String(a.peerID),this.callID=String(a.callID),this.$2=a.isCaller,this.$1=a.version||m.CURRENT_SUMMARY_VERSION,this.$3=b("FBRTCLocalUploadLogLevel").getLocalUploadLogLevel(),this.$14=new Date().valueOf(),this.$4=a.callTrigger||null,this.$5={},this.$7={},this.$8={},this.$13={},this.$34=null,this.$35=null,this.$36=null,this.$16=0,this.$17=0,this.$33=!1,this.$24={},this.$9={},this.$10={},this.$11={},this.$12={},this.$37=null,this.$19=b("performanceNow")(),this.$15=0,this.$6={},this.$18=this.$19,this.$20=0,this.$21={},this.addExtraInfo(b("FBRTCLogger").Key.DEVICE_INFO,this.$43()),this.$44(),this.$45(),this.$46(),this.$23=b("FBRTCIceStatsParser").getInstance(),this.$42=new(b("FBRTCMediaMetricTracker"))(),this.$22=b("FBRTCLogger").getInstance()}m.prototype.toJsonString=function(){"use strict";this.$17=new Date().valueOf();return JSON.stringify({version:this.$1,peerID:this.peerID,callID:this.callID,isCaller:this.$2,uploadLogLevel:this.$3,callType:this.$29,conferenceName:this.$26,joinWithSID:this.$27,activeConn:this.$25,escP2PCallID:this.$28,serverInfoData:this.$30,localVideoDuration:this.$31,remoteVideoDuration:this.$32,startTime:this.$14,trigger:this.$4,signalingTime:this.$5,escStateTimes:this.$7,applicationEventTime:this.$8,videoEscTimes:this.$13,endCallReason:this.$34,endCallSubreason:this.$35,isRemoteEnded:this.$36,lastUpdatedTime:this.$16,lastSerializedTime:this.$17,unsetOnRetrieve:this.$33,openCount:this.$20,extraInfo:this.$21,captureStats:this.$24,gen0IceSentCount:this.$9,gen0IceReceivedCount:this.$10,iceSentCount:this.$11,iceReceivedCount:this.$12,connectionType:this.$37,mediaMetricStats:this.$42.toJsonString(),newSignalingTime:this.$6,accumulatedCallTime:this.$47(),deviceCharged:this.$38,videoReceivedCodec:this.$39,videoSentCodec:this.$40,audioSentCodec:this.$41})};m.fromJsonString=function(a){"use strict";__p&&__p();try{a=JSON.parse(a)}catch(a){return null}if(a.version<m.OLDEST_SUPPORTED_SUMMARY_VERSION)return null;if(!Object.prototype.hasOwnProperty.call(a,"peerID")||!Object.prototype.hasOwnProperty.call(a,"callID")||!Object.prototype.hasOwnProperty.call(a,"isCaller")||!Object.prototype.hasOwnProperty.call(a,"startTime")||!Object.prototype.hasOwnProperty.call(a,"trigger")||!Object.prototype.hasOwnProperty.call(a,"signalingTime")||!Object.prototype.hasOwnProperty.call(a,"endCallReason")||!Object.prototype.hasOwnProperty.call(a,"isRemoteEnded")||!Object.prototype.hasOwnProperty.call(a,"lastUpdatedTime")||!Object.prototype.hasOwnProperty.call(a,"lastSerializedTime"))return null;var c=new m({peerID:a.peerID,callID:a.callID,isCaller:a.isCaller});c.$1=a.version;c.$3=a.uploadLogLevel;c.$14=a.startTime;c.$4=a.trigger;c.$5=a.signalingTime;c.$34=a.endCallReason;c.$35=a.endCallSubreason;c.$36=a.isRemoteEnded;c.$16=a.lastUpdatedTime;c.$17=a.lastSerializedTime;c.$27=a.joinWithSID;a.callType&&(c.$29=a.callType);a.conferenceName&&(c.$26=a.conferenceName);a.escP2PCallID&&(c.$28=a.escP2PCallID);a.activeConn&&(c.$25=a.activeConn);a.serverInfoData&&(c.$30=a.serverInfoData);a.localVideoDuration&&(c.$31=a.localVideoDuration);a.remoteVideoDuration&&(c.$32=a.remoteVideoDuration);a.unsetOnRetrieve&&(c.$33=a.unsetOnRetrieve);a.openCount&&(c.$20=a.openCount);a.extraInfo&&(c.$21=a.extraInfo);a.captureStats&&(c.$24=a.captureStats);a.gen0IceSentCount&&(c.$9=a.gen0IceSentCount);a.gen0IceReceivedCount&&(c.$10=a.gen0IceReceivedCount);a.iceSentCount&&(c.$11=a.iceSentCount);a.iceReceivedCount&&(c.$12=a.iceReceivedCount);a.newSignalingTime&&(c.$6=a.newSignalingTime);a.accumulatedCallTime&&(c.$15=a.accumulatedCallTime);a.escStateTimes&&(c.$7=a.escStateTimes);a.applicationEventTime&&(c.$8=a.applicationEventTime);a.videoEscTimes&&(c.$13=a.videoEscTimes);a.mediaMetricStats&&(c.$42=b("FBRTCMediaMetricTracker").fromJsonString(a.mediaMetricStats));a.connectionType&&(c.$37=a.connectionType);a.deviceCharged&&(c.$38=a.deviceCharged);a.videoReceivedCodec!==null&&(c.$39=a.videoReceivedCodec);a.videoSentCodec!==null&&(c.$40=a.videoSentCodec);a.audioSentCodec!==null&&(c.$41=a.audioSentCodec);return c};m.restoreOrInitialize=function(a,c,d,e,f,g){"use strict";c=String(c);d=String(d);a=a.retrieveCallSummary(c,d);!a?(a=new m({peerID:c,callID:d,isCaller:e}),f?(a.onFullMessageReceived({msg:f}),a.onOfferAckSent(f)):a.onCallStarted(g||b("FBRTCLogger").Trigger.UNKNOWN),b("FBRTCLogger").getInstance().logError(c,d,"Missing call summary from storage")):a.$33&&(a.$34=null,a.$35=null,a.$36=null,delete a.$5[h.CALL_ENDED],delete a.$6[h.CALL_ENDED],a.$19=0,a.$33=null);return a};m.logSavedSummaries=function(a){"use strict";__p&&__p();var c=a.getLoggableSummaries(),d=c.length;if(d<=0)return;var e=b("FBRTCLogger").getInstance(),f=[];for(var g=0;g<d;g++){var h=c[g];e.logEndCallSummary(h);f.push({peerID:h.peerID,callID:h.callID})}a.removeCallSummaries(f);e.logToConsole("Logged pending summaries: "+d)};m.prototype.isNull=function(){"use strict";var a=m.CANONICAL_NULL_SUMMARY;return this.peerID===a.peerID&&this.callID===a.callID&&this.isCaller()===a.isCaller()&&this.getCallTrigger()===a.getCallTrigger()};m.prototype.save=function(a){"use strict";var c=b("performanceNow")(),d=c-this.$18;if(d>g){this.$22.logInfo(this.peerID,this.callID,"Summary too old: "+d);return}a.storeCallSummary(this.peerID,this.callID,this);this.$18=c};m.prototype.getVersion=function(){"use strict";return this.$1};m.prototype.getLastUpdatedTime=function(){"use strict";return this.$16};m.prototype.setLastUpdatedTime=function(a){"use strict";this.$16=a};m.prototype.getExtraInfo=function(){"use strict";return this.$21};m.prototype.getCallTrigger=function(){"use strict";return this.$4};m.prototype.addExtraInfo=function(a,b){"use strict";this.$21[a]=b,this.$46()};m.prototype.isCaller=function(){"use strict";return this.$2};m.prototype.isNetworkReady=function(){"use strict";if(this.$5[h.NETWORK_READY])return!0;else return!1};m.prototype.isAnswerReceived=function(){"use strict";if(this.$5[h.RECV_ANSWER])return!0;else return!1};m.prototype.onCallStarted=function(a){"use strict";this.$4=a,this.$48(h.CALL_STARTED),this.$46()};m.prototype.setCallTrigger=function(a){"use strict";this.$4=a,this.$46()};m.prototype.onPopupOpened=function(){"use strict";this.$49(i.POPUP_OPENED),this.$20++,this.$46()};m.prototype.onPressedAnswer=function(){"use strict";this.$49(i.PRESSED_ANSWER),this.$46()};m.prototype.onMediaRequested=function(){"use strict";this.$49(i.MEDIA_REQUESTED),this.$46()};m.prototype.onMediaSucceeded=function(){"use strict";this.$49(i.MEDIA_SUCCEEDED),this.$46()};m.prototype.onFellbackToAudio=function(){"use strict";this.$49(i.FELLBACK_TO_AUDIO),this.$46()};m.prototype.setConnectionType=function(a){"use strict";this.$37=a,this.$46()};m.prototype.setVideoCaptureStats=function(a,b){"use strict";this.$24={w:a,h:b},this.$46()};m.prototype.setUploadLogLevel=function(a){"use strict";this.$3=a,this.$46()};m.prototype.getCallType=function(){"use strict";return this.$29};m.prototype.setCallType=function(a){"use strict";this.$29=a,this.addExtraInfo(b("FBRTCLogger").Key.CALL_TYPE,a),this.$46()};m.prototype.setVideoDurations=function(a,b){"use strict";this.$31=a,this.$32=b,this.$46()};m.prototype.setScreenDuration=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.SCREEN_DURATION,a)};m.prototype.setConferenceName=function(a){"use strict";this.$26=a,this.$46()};m.prototype.setTotalVideoFilterDuration=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.VIDEO_DURATION_WITH_FILTER,Math.ceil(a).toString())};m.prototype.setCoExperienceEffectDuration=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.EFFECT_TOTAL_DURATION,Math.ceil(a).toString())};m.prototype.setEffectCount=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.EFFECT_COUNT,a.toString())};m.prototype.setJoinWithSID=function(a){"use strict";this.$27=a,this.$46()};m.prototype.setServerInfoData=function(a){"use strict";this.$30=a,this.$46()};m.prototype.setActiveConnection=function(a){"use strict";this.$25=a,this.$46()};m.prototype.setEscalationP2PCallID=function(a){"use strict";this.$28=a,this.$46()};m.prototype.onOfferAckSent=function(a){"use strict";this.onMessageSent({type:b("FBRTCConstants").PayloadType.OFFER_ACK,flag:a.flag})};m.prototype.onMessageSent=function(a){"use strict";__p&&__p();var c=a.flag===1;switch(a.type){case b("FBRTCConstants").PayloadType.OFFER:this.$50(c,h.SENT_OFFER,h.SENT_RETRIED_OFFER);this.$51(a,this.$9,this.$11);break;case b("FBRTCConstants").PayloadType.ANSWER:this.$50(c,h.SENT_ANSWER,h.SENT_RETRIED_ANSWER);this.$51(a,this.$9,this.$11);break;case b("FBRTCConstants").PayloadType.OK:this.$48(h.SENT_OK);break;case b("FBRTCConstants").PayloadType.PRANSWER:this.$48(h.SENT_PRANSWER);break;case b("FBRTCConstants").PayloadType.OFFER_ACK:this.$50(c,h.SENT_OFFER_ACK,h.SENT_RETRIED_OFFER_ACK);break;case b("FBRTCConstants").PayloadType.ANSWER_ACK:this.$50(c,h.SENT_ANSWER_ACK,h.SENT_RETRIED_ANSWER_ACK);break;case b("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$51(a,this.$9,this.$11);break;case b("FBRTCConstants").PayloadType.ACK:a.ack_type===b("FBRTCConstants").PayloadType.VIDEO_REQUEST&&this.$52(k.SENT_ESC_REQUEST_ACK);break;case b("FBRTCConstants").PayloadType.VIDEO_REQUEST:a.ack_id?this.$52(k.SENT_ESC_RESPONSE):this.$52(k.SENT_ESC_REQUEST);break;default:}this.$46()};m.prototype.$51=function(a,b,c){"use strict";var d,e=null;a=this.$23.extractIceInfo(a.sdp);for(var f=0;f<a.length;f++)d=a[f].gen,e=a[f].type,d===0&&this.$53(b,e),this.$53(c,e)};m.prototype.$53=function(a,b){"use strict";!a[b]?a[b]=1:a[b]+=1};m.prototype.$54=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.PEER_IS_MOBILE,a.isFromMobile()?"1":"0")};m.prototype.onFullMessageReceived=function(a){"use strict";__p&&__p();var c=a.msg,d=c.flag===1;switch(c.type){case b("FBRTCConstants").PayloadType.OFFER:this.$54(a);this.$50(d,h.RECV_OFFER,h.RECV_RETRIED_OFFER);this.$51(c,this.$10,this.$12);break;case b("FBRTCConstants").PayloadType.ANSWER:this.$54(a);this.$50(d,h.RECV_ANSWER,h.RECV_RETRIED_ANSWER);this.$51(c,this.$10,this.$12);break;case b("FBRTCConstants").PayloadType.OK:this.$48(h.RECV_OK);break;case b("FBRTCConstants").PayloadType.PRANSWER:this.$48(h.RECV_PRANSWER);break;case b("FBRTCConstants").PayloadType.OFFER_ACK:this.$50(d,h.RECV_OFFER_ACK,h.RECV_RETRIED_OFFER_ACK);break;case b("FBRTCConstants").PayloadType.ANSWER_ACK:this.$50(d,h.RECV_ANSWER_ACK,h.RECV_RETRIED_ANSWER_ACK);break;case b("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$51(c,this.$10,this.$12);break;case b("FBRTCConstants").PayloadType.ACK:c.ack_type===b("FBRTCConstants").PayloadType.VIDEO_REQUEST&&this.$52(k.RECV_ESC_REQUEST_ACK);break;case b("FBRTCConstants").PayloadType.VIDEO_REQUEST:c.ack_id?c.videoon||c.reqVideoOn?this.$52(k.RECV_ESC_ACCEPT):this.$52(k.RECV_ESC_DECLINE):c.videoon||c.reqVideoOn?this.$52(k.RECV_ESC_REQUEST):this.$52(k.RECV_ESC_TIMEOUT);default:}this.$46()};m.prototype.onMsgAckReceived=function(a,b){"use strict";a=a.msg.flag===1;b?this.$50(a,h.RECV_OFFER_ACK,h.RECV_RETRIED_OFFER_ACK):this.$50(a,h.RECV_ANSWER_ACK,h.RECV_RETRIED_ANSWER_ACK)};m.prototype.onNetworkReady=function(){"use strict";this.$48(h.NETWORK_READY),this.$46()};m.prototype.onCallConnected=function(){"use strict";this.$48(h.CALL_CONNECTED),this.$46()};m.prototype.onCallEnded=function(a,b,c,d){"use strict";this.$33=c,this.$34=String(a),this.$35=d,this.$36=b,this.$48(h.CALL_ENDED),this.$46()};m.prototype.setOfferSentTime=function(){"use strict";this.$48(h.SENT_OFFER)};m.prototype.setOfferAckReceivedTime=function(){"use strict";this.$48(h.RECV_OFFER_ACK)};m.prototype.setAnswerSentTime=function(){"use strict";this.$48(h.SENT_ANSWER)};m.prototype.setAnswerReceivedTime=function(){"use strict";this.$48(h.RECV_ANSWER)};m.prototype.setJoinRequestSent=function(){"use strict";this.$48(h.SENT_JOIN_REQUEST),this.$46()};m.prototype.setJoinResponseReceived=function(){"use strict";this.$48(h.RECV_JOIN_RESPONSE),this.$46()};m.prototype.setJoinResponseProcessed=function(){"use strict";this.$48(h.PROC_JOIN_RESPONSE),this.$46()};m.prototype.setRingRequestReceived=function(){"use strict";this.$48(h.RECV_RING_REQUEST),this.$46()};m.prototype.setRingResponseSent=function(){"use strict";this.$48(h.SENT_RING_RESPONSE),this.$46()};m.prototype.setEscalationAvailable=function(){"use strict";this.$55(j.ESCALATION_IS_AVAILABLE)};m.prototype.setEscalationInitiated=function(){"use strict";this.$55(j.USER_INITIATED_REQUEST)};m.prototype.setReceivedEscalationRequest=function(){"use strict";this.$55(j.RECEIVED_INCOMING_REQUEST)};m.prototype.setInvalidP2PEscalationState=function(){"use strict";this.$55(j.REJECTED_INVALID_P2P_STATE)};m.prototype.setEscalationConnectingToMultiway=function(){"use strict";this.$55(j.CONNECTING_TO_MULTIWAY)};m.prototype.setEscalationConnectedToMultiway=function(){"use strict";this.$55(j.CONNECTED_TO_MULTIWAY)};m.prototype.setEscalationPeerConnectingToMultiway=function(){"use strict";this.$55(j.PEER_CONNECTING_TO_MULTIWAY)};m.prototype.setEscalationPeerConnectedToMultiway=function(){"use strict";this.$55(j.PEER_CONNECTED_TO_MULTIWAY)};m.prototype.setReadyToEscalate=function(){"use strict";this.$55(j.READY_TO_ESCALATE)};m.prototype.setEscalationPeerFailedToConnectToMultiway=function(){"use strict";this.$55(j.PEER_FAILED_TO_CONNECT_TO_MULTIWAY)};m.prototype.setEscalationTimedOut=function(){"use strict";this.$55(j.TIMED_OUT)};m.prototype.setVidEscalationInitClick=function(){"use strict";this.$52(k.ESCALATION_INITIATION_BUTTON_CLICKED)};m.prototype.setVidEscalationAcceptedClick=function(){"use strict";this.$52(k.ESCALATION_APPROVED_BUTTON_CLICKED)};m.prototype.setVidEscalationDeclinedClick=function(){"use strict";this.$52(k.ESCALATION_DECLINED_BUTTON_CLICKED)};m.prototype.setVidEscalationMediaRequested=function(){"use strict";this.$52(k.USERMEDIA_REQUEST)};m.prototype.setVidEscalationMediaSuccess=function(){"use strict";this.$52(k.USERMEDIA_SUCCESS)};m.prototype.setVidEscalationMediaFailed=function(){"use strict";this.$52(k.USERMEDIA_FAILURE)};m.prototype.setVideoCapabilities=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.VIDEO_CAPABILITIES,a)};m.prototype.setMediaInputs=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.MEDIA_INPUTS,a)};m.prototype.getVideoReceivedCodec=function(){"use strict";return this.$39};m.prototype.setVideoReceivedCodec=function(a){"use strict";this.$39=a};m.prototype.getVideoSentCodec=function(){"use strict";return this.$40};m.prototype.setVideoSentCodec=function(a){"use strict";this.$40=a};m.prototype.getAudioSentCodec=function(){"use strict";return this.$41};m.prototype.setAudioSentCodec=function(a){"use strict";this.$41=a};m.prototype.toString=function(){"use strict";var a={};a.core_metrics=this.$56();a.time_series=null;return JSON.stringify(a)};m.prototype.$56=function(){"use strict";__p&&__p();var a={};a.ver=this.$1;a.log_level=b("FBRTCConstants").uploadLogLevelString(this.$3);a.caller=this.$2;a.call_type=this.$29;a.active_conn=this.$25;a.app_event_times=this.$8;a.conf_name=this.$26;a.join_with_sid=this.$27;a.esc_p2p_call_id=this.$28;a.esc_state_times=this.$7;a.vid_esc_times=this.$13;a.serv_info=this.$30;a.conn=this.$57();a.peer_id=this.peerID;a.has_video=!0;a.open_count=this.$20;a.signaling=this.$58();a.sender=this.$59();a.receiver=this.$60();a.end=this.$61();a.video=this.$62();a.push_phase=b("SiteData").push_phase;a.DebugAudioMetrics=this.$63();a.device_charged=this.$38;return a};m.prototype.$63=function(){"use strict";return{NetworkReceive:{jb_nm:this.$64()}}};m.prototype.$64=function(){"use strict";var a={},b=this.$42.getAudioStreamReportKeys().pop();l.forEach(function(c){var d=this.$42.getMetricStats(b,c);d&&(a[c]={m:d.min,M:d.max,avg:d.mean})}.bind(this));var c=this.$42.getJitterBufferStats(b);a.neteq={maxWait:c.max,meanWait:c.mean||0,mediaWait:c.median||0,minWait:c.min};return a};m.prototype.$57=function(){"use strict";var a={dtls:1},b=this.$59();b.avgrtt&&(a.avgrtt=b.avgrtt,a.maxrtt=b.maxrtt,a.minrtt=b.minrtt);return a};m.prototype.$58=function(){"use strict";var a={};this.$4&&(a.trigger=this.$4);a.start_time=this.$14;a.time_from_start=this.$5;a.new_time_from_start=this.$6;var b=this.$65();b>0&&(a.duration=b);return a};m.prototype.$65=function(a){"use strict";var b=this.$6[h.CALL_CONNECTED]||this.$6[h.NETWORK_READY];if(!b)return 0;a=this.$6[h.CALL_ENDED]||!(a==null?void 0:a.assumeOngoing)&&this.$15||this.$47();return Math.max(0,a-b)};m.prototype.$59=function(){"use strict";__p&&__p();var a={},c=this.$42.getAudioStreamReportKeys();c.some(function(c){c=this.$42.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_BYTES_SENT);if(c!=null){a.bytes=c.current;var d=c.updatedTime-c.startedTime;d>0&&(a.ube_avg=(c.current-c.first)*8/d*1e3);return!0}return!1}.bind(this));c.some(function(c){c=this.$42.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_SENT_LOST);if(c){a.plost=c.current;return!0}return!1}.bind(this));c.some(function(c){c=this.$42.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_SENT);if(c){a.psent=c.current;return!0}return!1}.bind(this));c.some(function(c){c=this.$42.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_RTT_SENT);if(c){a.avgrtt=c.mean;a.maxrtt=c.max;a.minrtt=c.min;return!0}return!1}.bind(this));this.$9&&(a.ice_g0=this.$9);this.$11&&(a.ice=this.$11);this.$41!=null&&this.$41!==""&&(a.codec={www:this.$41});return a};m.prototype.$60=function(){"use strict";__p&&__p();var a={},c=this.$42.getAudioStreamReportKeys();c.some(function(c){__p&&__p();var d=this.$42.getMetricStats(c,b("FBRTCMediaMetricsConst").DECODING_PLC),e=this.$42.getMetricStats(c,b("FBRTCMediaMetricsConst").DECODING_PLC_CNG),f=this.$42.getMetricStats(c,b("FBRTCMediaMetricsConst").DECODING_CNG);c=this.$42.getMetricStats(c,b("FBRTCMediaMetricsConst").DECODING_NORMAL);if(f!=null&&c!=null&&d!=null&&e!=null){a.dec_cng=f.current;a.dec_normal=c.current;a.dec_plc=d.current;a.dec_plc_cng=e.current;a.neteq_calls=a.dec_cng+a.dec_normal+a.dec_plc+a.dec_plc_cng;return!0}return!1}.bind(this));c.some(function(c){c=this.$42.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_BYTES_RECEIVED);if(c){a.bytes=c.current;var d=c.updatedTime-c.startedTime;d>0&&(a.dbe_avg=(c.current-c.first)*8/d*1e3);return!0}return!1}.bind(this));c.some(function(c){c=this.$42.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED_LOST);if(c){a.plost=c.current;return!0}return!1}.bind(this));c.some(function(c){c=this.$42.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED);if(c){a.precv=c.current;return!0}return!1}.bind(this));c.some(function(c){c=this.$42.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_RTT_RECEIVED);if(c){a.avgrtt=c.mean;a.maxrtt=c.max;a.minrtt=c.min;return!0}return!1}.bind(this));this.$10&&(a.ice_g0=this.$10);this.$12&&(a.ice=this.$12);return a};m.prototype.$61=function(){"use strict";var a={};this.$34!==null&&(a.end_call_reason_string=b("FBRTCConstants").callEndReasonString(this.$34),this.$35!==null&&(a.end_call_subreason_string=this.$35),a.remote_ended=this.$36);this.$37&&(a.conn_type=this.$37);return a};m.prototype.$62=function(){"use strict";var a={capture:{},ename:this.$40,eqps:this.$66(),frames:this.$67(),psent:null,plost:null};this.$24&&Object.assign(a.capture,this.$24);return{sender:this.$68(a),receiver:this.$69(),ld:this.$31,rd:this.$32,bwe:this.$70()}};m.prototype.$66=function(){"use strict";__p&&__p();var a=null,c=this.$42.getVideoStreamReportKeys();c.some(function(c){c=this.$42.getVideoMetric(c,b("FBRTCMediaMetricsConst").OUTBOUND_QP);if(c){a=c.current;return!0}return!1}.bind(this));return a};m.prototype.$67=function(){"use strict";__p&&__p();var a=null,c=this.$42.getVideoStreamReportKeys();c.some(function(c){c=this.$42.getVideoMetric(c,b("FBRTCMediaMetricsConst").FRAMES_ENCODED);if(c){a=c.current;return!0}return!1}.bind(this));return a};m.prototype.$70=function(){"use strict";__p&&__p();var a={avg_enc_bitrate:this.$71(),avg_send_bw:null,avg_trans_bitrate:null,avg_retrans_bitrate:null},c=this.$42.getVideoStreamReportKeys();c.some(function(c){var d=this.$42.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEOBWE_SEND_BANDWIDTH),e=this.$42.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEOBWE_TRANSMIT_BITRATE);c=this.$42.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEOBWE_RETRANSMIT_BITRATE);if(d&&e&&c){a.avg_send_bw=d.mean;a.avg_trans_bitrate=e.mean;a.avg_retrans_bitrate=c.mean;return!0}return!1}.bind(this));return a};m.prototype.$71=function(){"use strict";__p&&__p();var a=this.$42.getVideoStreamReportKeys(),c=null;a.some(function(a){a=this.$42.getVideoMetric(a,b("FBRTCMediaMetricsConst").VIDEO_BYTES_SENT);if(a){var d=a.current-a.first;a=a.updatedTime-a.startedTime;a>0&&(c=d*8/a*1e3);return!0}return!1}.bind(this));return c};m.prototype.$68=function(a){"use strict";__p&&__p();var c=this.$42.getVideoStreamReportKeys();c.some(function(c){var d=this.$42.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEO_PKTS_SENT);c=this.$42.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEO_PKTS_SEND_LOST);if(d&&c){a.psent=d.current;a.plost=c.current;return!0}return!1}.bind(this));return a};m.prototype.$69=function(){"use strict";__p&&__p();var a={dec_bytes:null,dec_time:null,dname:this.$39,frd:null,precv:null,plost:null,qps:null},c=this.$42.getVideoStreamReportKeys();c.some(function(c){var d=this.$42.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEO_PKTS_RECEIVED);c=this.$42.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEO_PKTS_RECV_LOST);if(d&&c){a.precv=d.current;a.plost=c.current;return!0}return!1}.bind(this));c.some(function(c){c=this.$42.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEO_BYTES_RECEIVED);if(c){a.dec_bytes=c.current-c.first;a.dec_time=c.updatedTime-c.startedTime;return!0}return!1}.bind(this));c.some(function(c){var d=this.$42.getVideoMetric(c,b("FBRTCMediaMetricsConst").FRAMES_DECODED);c=this.$42.getVideoMetric(c,b("FBRTCMediaMetricsConst").INBOUND_QP);if(d&&c){a.frd=d.current;a.qps=c.current;return!0}return!1}.bind(this));return a};m.prototype.$72=function(){"use strict";return new Date().valueOf()-this.$14};m.prototype.$47=function(){"use strict";var a=b("performanceNow")()-this.$19;return Math.floor(this.$15+a)};m.prototype.$48=function(a){"use strict";if(this.$5[a])return;this.$5[a]=this.$72();this.$6[a]=this.$47()};m.prototype.$55=function(a){"use strict";if(this.$7[a])return;this.$7[a]=this.$72()};m.prototype.$49=function(event){"use strict";if(this.$8[event])return;this.$8[event]=this.$72()};m.prototype.$52=function(event){"use strict";if(this.$13[event])return;this.$13[event]=this.$72()};m.prototype.setDeviceCharged=function(a){"use strict";this.$38=a};m.prototype.$50=function(a,b,c){"use strict";a?this.$48(c):this.$48(b)};m.prototype.$46=function(){"use strict";this.$16=new Date().valueOf()};m.prototype.$43=function(){"use strict";var a=b("UserAgentData").platformName;window.navigator.userAgent.toLowerCase().includes("mobile")&&(a+=" Mobile");return{device:b("UserAgentData").deviceName,os:a,os_version:b("UserAgentData").platformFullVersion,browser:b("UserAgentData").browserName,browser_version:b("UserAgentData").browserFullVersion,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth,user_agent:window.navigator.userAgent}};m.prototype.$44=function(){"use strict";window.navigator.connection!=null&&window.navigator.connection.effectiveType!=null&&this.addExtraInfo(b("FBRTCLogger").Key.CONNECTION_EFFECTIVE_TYPE,window.navigator.connection.effectiveType)};m.prototype.$45=function(){"use strict";navigator.hardwareConcurrency!=null&&this.addExtraInfo(b("FBRTCLogger").Key.CPU_CORES,navigator.hardwareConcurrency),window.navigator.deviceMemory!=null&&this.addExtraInfo(b("FBRTCLogger").Key.DEVICE_MEMORY,window.navigator.deviceMemory),this.addExtraInfo(b("FBRTCLogger").Key.DEVICE_PIXEL_RATIO,window.devicePixelRatio)};m.prototype.getCallDuration=function(){"use strict";var a=b("gkx")("707989");return this.$65({assumeOngoing:a})};m.prototype.getConnectedStartTime=function(){"use strict";return this.$5[h.CALL_CONNECTED]?this.$5[h.CALL_CONNECTED]+this.$14:0};m.prototype.getCurrentTimeFromCallConnected=function(){"use strict";var a=this.$6[h.CALL_CONNECTED];return this.$47()-a};m.prototype.getMediaMetricTracker=function(){"use strict";return this.$42};m.CANONICAL_NULL_SUMMARY=Object.freeze(m.nullSummary());m.OLDEST_SUPPORTED_SUMMARY_VERSION=19;m.CURRENT_SUMMARY_VERSION=24;m.REPORT_KEY="reportID";e.exports=m}),null);
__d("FBRTCCallSummaryStore",["CacheStorage","FBLogger","FBRTCCallSummary","FBRTCLogger","areEqual"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="localstorage",h="RTC_CALL_SUMMARY_",i="summary",j=2e3,k=3,l=3*60*1e3,m=null;n.getInstance=function(){m||(m=new n());return m};function n(){this.$1=new(b("CacheStorage"))(g,h),this.$2=b("FBRTCLogger").getInstance()}n.prototype.storeCallSummary=function(a,c,d){__p&&__p();if(d.isNull()){b("FBLogger")("rtweb").mustfix("Storing invalid FBRTCCallSummary!");return}var e=this;this.$3(function(b){__p&&__p();b[a]||(b[a]={});var f=b[a][c];if(f){f=e.$4(f);if(f&&f.getLastUpdatedTime()>d.getLastUpdatedTime()){e.$2.logToConsole("Outdated summaries");return null}}b[a][c]=e.$5(d);return b},e.$2.logError.bind(e.$2,a,c))};n.prototype.retrieveCallSummary=function(a,b){var c=this.getCallSummaries(),d=null;c[a]&&(d=c[a][b]);if(d)return this.$4(d);else return null};n.prototype.removeCallSummary=function(a,b){this.removeCallSummaries([{peerID:a,callID:b}])};n.prototype.removeCallSummaries=function(a){this.$3(function(b){var c=a.length;for(var d=0;d<c;d++){var e=a[d].peerID,f=a[d].callID;b[e]&&b[e][f]&&(delete b[e][f],this.$6(b[e])&&delete b[e])}return b}.bind(this),this.$2.logError.bind(this.$2,null,null))};n.prototype.getLoggableSummaries=function(){var a=this.getCallSummaries(),b=[];for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c))for(var d in a[c])if(Object.prototype.hasOwnProperty.call(a[c],d)){var e=this.$4(a[c][d],l);e&&b.push(e)}return b};n.prototype.$6=function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!1;return!0};n.prototype.$5=function(a){a={__t:Date.now(),__d:a.toJsonString()};return a};n.prototype.$4=function(a,c){return a&&(!c||Date.now()-a.__t>=c)?b("FBRTCCallSummary").fromJsonString(a.__d):null};n.prototype.getCallSummaries=function(){var a=this.$1.get(i)||{};return a};n.prototype.$3=function(a,c,d,e){__p&&__p();d===void 0&&(d=k);(d===undefined||d===null)&&(d=k);var f=this.getCallSummaries(),g=this.getCallSummaries();f=a(f);if(f===null)return;var h=this.getCallSummaries();if(b("areEqual")(g,h))this.$1.set(i,f);else if(d>0){c("Retry lock");if(e){var l=this;setTimeout(function(){l.$3(a,c,d-1,!0)},j)}else this.$3(a,c,d-1,!0)}else c("Failed to lock")};e.exports=n}),null);
__d("FBRTCCallSummaryUploader",["Banzai","FBRTCCallSummary","FBRTCCallSummaryStore"],(function(a,b,c,d,e,f){a={init:function(){var a=b("FBRTCCallSummaryStore").getInstance();b("Banzai").subscribe(b("Banzai").SEND,function(){b("FBRTCCallSummary").logSavedSummaries(a)})}};e.exports=a}),null);
__d("FantaDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("ExplicitRegistrationDispatcher"));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=new a({strict:!1})}),null);
__d("FantaTabActions",["Bootloader","CurrentUser","FantaDispatcher","MercuryIDs","MessengerURIConstants","URI","WebMessengerThreadPermalinks","WorkGalahadSettings","WorkplaceChatHelper","gkx","goURI","ifRequired","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({BLUR_TAB:null,CLEAR_PAGE_INDICATOR_DESCRIPTION:null,CLOSE_ALL_TABS:null,CLOSE_AND_TAB_NEXT:null,CLOSE_TAB:null,DELETE_TAB:null,FOCUS_NEXT_TAB:null,FOCUS_PREVIOUS_TAB:null,FOCUS_TAB:null,HIGHLIGHT_NEW_MESSAGE:null,HOVERED_TAB:null,JUMP_TO_MESSAGE:null,LOAD_FROM_DATA:null,MINIMIZE_ALL_TABS:null,MINIMIZE_TAB:null,OPEN_TAB_WITH_INTERSTITIAL_DATA:null,OPEN_TAB:null,REPLACE_TAB:null,SCROLL_BOTTOM_CHANGED:null,SET_ALLOWED_RAISED_TABS:null,SET_MESSAGE_COUNT:null,SET_PAGE_INDICATOR_DESCRIPTION:null,SET_PERMANENT_URI:null,SHOW_UNSEEN_MESSAGES:null,UNHIGHLIGHT_NEW_MESSAGE:null,UNHOVERED_TAB:null,UNMINIMIZE_TAB:null,WIPE_JUMP_TO_MESSAGE:null});function h(a,c){var d=a?new(b("URI"))(b("WebMessengerThreadPermalinks").getThreadURIFromServerID(a)):new(b("URI"))(b("MessengerURIConstants").COMPOSE_SUBPATH);b("ifRequired")("BusinessURI.brands",function(a){return b("goURI")(a(d))},function(){return setTimeout(function(){i.openTab(a,c)},100)})}var i={Types:g,openNewMessageTab:function(a,b,c){i.openTab(a,b,c,!0)},openTab:function(a,c,d,e,f){__p&&__p();if(b("CurrentUser").isWorkUser()){if(b("WorkGalahadSettings").isGalahadEnabled){var i=b("ifRequired")("WorkGalahadChat",function(c){c.openThread(b("MercuryIDs").getThreadFBIDFromThreadID(a));return!0},function(){return!1});if(i)return}if(b("WorkplaceChatHelper").suppressChatIfActiveOnDesktop()&&b("gkx")("678256")){if(c==="jewel_new_message"){b("goURI")("workchat://new");return}if(!b("MercuryIDs").isLocalThread(a)||c!=="groupsync_fbgroupmall_chat_button"){b("goURI")("workchat://"+(a||""));return}}}b("ifRequired")("FantaTabsEagerBootloader",function(a){return a.bootload()});this.dispatchOrBootloadGetMessages(function(){b("FantaDispatcher").dispatch({type:g.OPEN_TAB,tabID:a,entryPoint:c,defaultText:d,isNewMessageTab:e,defaultPreview:f}),b("ifRequired")("FantaTabsReactApp",function(b){this._tryLoadSlimApp(a,c)}.bind(this),function(){this._tryLoadSlimApp(a,c,function(){return h(a,c)})}.bind(this))}.bind(this))},openInterstitialTab:function(a,c,d){this.dispatchOrBootloadGetMessages(function(){b("FantaDispatcher").dispatch({type:g.OPEN_TAB_WITH_INTERSTITIAL_DATA,tabID:a,interstitialData:c,entryPoint:d}),b("ifRequired")("FantaTabsReactApp",function(b){this._tryLoadSlimAppWithInterstitialData(a,c,d)}.bind(this),function(){this._tryLoadSlimAppWithInterstitialData(a,c,d)}.bind(this))}.bind(this))},_tryLoadSlimApp:function(a,c,d){b("ifRequired")("FantaTabsSlimApp",function(d){b("ifRequired")("FantaAppStore",function(){},function(){d.getPumpedUp(function(){b("FantaDispatcher").dispatch({type:g.OPEN_TAB,tabID:a,entryPoint:c})})})},function(){return d&&d(a)})},_tryLoadSlimAppWithInterstitialData:function(a,c,d){b("ifRequired")("FantaTabsSlimApp",function(e){b("ifRequired")("FantaAppStore",function(){},function(){e.getPumpedUp(function(){b("FantaDispatcher").dispatch({type:g.OPEN_TAB_WITH_INTERSTITIAL_DATA,tabID:a,interstitialData:c,entryPoint:d})})})})},replaceTab:function(a,c){b("FantaDispatcher").dispatch({type:g.REPLACE_TAB,tabID:a,newTabID:c})},minimizeTab:function(a){b("FantaDispatcher").dispatch({type:g.MINIMIZE_TAB,tabID:a})},minimizeAllTabs:function(){b("FantaDispatcher").dispatch({type:g.MINIMIZE_ALL_TABS})},unminimizeTab:function(a){b("FantaDispatcher").dispatch({type:g.UNMINIMIZE_TAB,tabID:a})},closeTab:function(a){b("FantaDispatcher").dispatch({type:g.CLOSE_TAB,tabID:a})},closeAllTabs:function(){b("FantaDispatcher").dispatch({type:g.CLOSE_ALL_TABS})},closeAndTabNext:function(a){b("FantaDispatcher").dispatch({type:g.CLOSE_AND_TAB_NEXT,tabID:a})},deleteTab:function(a){b("FantaDispatcher").dispatch({type:g.DELETE_TAB,tabID:a})},focusTab:function(a){b("FantaDispatcher").dispatch({type:g.FOCUS_TAB,tabID:a})},blurTab:function(a){b("FantaDispatcher").dispatch({type:g.BLUR_TAB,tabID:a})},hoveredTab:function(a){b("FantaDispatcher").dispatch({type:g.HOVERED_TAB,tabID:a})},unhoveredTab:function(a){b("FantaDispatcher").dispatch({type:g.UNHOVERED_TAB,tabID:a})},highlightNewMessage:function(a){b("FantaDispatcher").dispatch({type:g.HIGHLIGHT_NEW_MESSAGE,tabId:a})},unhighlightNewMessage:function(a){b("FantaDispatcher").dispatch({type:g.UNHIGHLIGHT_NEW_MESSAGE,tabId:a})},setAllowedRaisedTabs:function(a){b("FantaDispatcher").dispatch({type:g.SET_ALLOWED_RAISED_TABS,allowedRaisedTabs:a})},loadFromData:function(a){this.dispatchOrBootloadGetMessages(function(){a&&b("FantaDispatcher").dispatch({type:g.LOAD_FROM_DATA,tabData:a})})},focusNextTab:function(event){b("FantaDispatcher").dispatch({type:g.FOCUS_NEXT_TAB,event:event})},focusPreviousTab:function(event){b("FantaDispatcher").dispatch({type:g.FOCUS_PREVIOUS_TAB,event:event})},scrollBottomChanged:function(a,c,d){b("FantaDispatcher").dispatch({type:g.SCROLL_BOTTOM_CHANGED,isScrolledToBottom:c,tabID:a,showUnseenMessages:d})},jumpToMessage:function(a,c){b("FantaDispatcher").dispatch({type:g.JUMP_TO_MESSAGE,mid:c,tabID:a})},wipeJumpToMessage:function(a){b("FantaDispatcher").dispatch({type:g.WIPE_JUMP_TO_MESSAGE,tabID:a})},setPageIndicatorDescription:function(a,c){b("FantaDispatcher").dispatch({type:g.SET_PAGE_INDICATOR_DESCRIPTION,tabID:a,description:c})},clearPageIndicatorDescription:function(a){b("FantaDispatcher").dispatch({type:g.CLEAR_PAGE_INDICATOR_DESCRIPTION,tabID:a})},showUnseenMessages:function(a){b("FantaDispatcher").dispatch({type:g.SHOW_UNSEEN_MESSAGES,tabID:a})},setPermanentUri:function(a,c){b("FantaDispatcher").dispatch({type:g.SET_PERMANENT_URI,tabID:a,uri:c})},dispatchOrBootloadGetMessages:function(a){b("ifRequired")("FantaReducersGetMessages",function(){a()},function(){b("ifRequired")("FantaAppStore",function(c){b("Bootloader").loadModules(["FantaReducersGetMessages"],function(b){c.addReducers(b),a()},"FantaTabActions")},function(){a()})})}};e.exports=i}),null);
__d("FantaTypeFileUploader",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=Object.freeze({ANIMATED_IMAGE:"animated_image",AUDIO:"audio",FILE:"file",GENERIC_ATTACHMENT:"generic_attachment",IMAGE:"image",VIDEO:"video"});d={uploadedFiles:b("immutable").Map(),uploadingFiles:b("immutable").Map()};g=babelHelpers.inherits(a,b("immutable").Record(d));g&&g.prototype;a.prototype.getTypeIDs=function(a){return this.uploadedFiles.reduce(function(b,c){c.type===a&&c.uploadedID&&(b=b.concat(c.uploadedID));return b},[])};function a(){g.apply(this,arguments)}a.fileTypes=c;e.exports=a}),null);
__d("MessengerDispatcher",["Dispatcher_DEPRECATED"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("Dispatcher_DEPRECATED"))()}),null);
__d("MessengerMQTTConnectionEvents",[],(function(a,b,c,d,e,f){"use strict";e.exports={DELTA_EVENT:"messenger-mqtt-delta",STREAM_DISCONNECT:"messenger-mqtt-stream-disconnect",STREAM_CONNECTING:"messenger-mqtt-stream-connecting",STREAM_CONNECT:"messenger-mqtt-stream-connect",STATE_CONNECTED:"Connected",STATE_DISCONNECTED:"Disconnected",STATE_CONNECTING:"Connecting",TYP:"messenger-mqtt-typ"}}),null);
__d("MessengerMQTTGating",["gkx"],(function(a,b,c,d,e,f){"use strict";var g={_forcedOff:!1,isEnabled:function(){return b("gkx")("678651")&&!g._forcedOff},turnOff:function(){g._forcedOff=!0}};e.exports=g}),null);
__d("P2PActionConstants",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({CREDIT_CARDS_UPDATED:"credit_cards_updated",CREDIT_CARDS_UPDATED_ERROR:"credit_cards_updated_error",CHANNEL_EVENTS_ALLOWED:"channel_events_allowed",CHANNEL_EVENTS_IGNORED:"channel_events_ignored",CREDIT_CARD_SAVING:"credit_card_saving",CREDIT_CARD_ADDED:"credit_card_added",CREDIT_CARD_ADDED_ERROR:"credit_card_added_error",CREDIT_CARD_ADDED_ERROR_CLEARED:"credit_card_added_error_cleared",CREDIT_CARD_DELETED:"credit_card_deleted",CREDIT_CARD_DELETED_ERROR:"credit_card_deleted_error",CREDIT_CARD_UPDATED:"credit_card_updated",CREDIT_CARD_UPDATED_ERROR:"credit_card_updated_error",PRESET_CREDIT_CARD_UPDATED:"preset_credit_card_updated",PRESET_CREDIT_CARD_UPDATED_ERROR:"preset_credit_card_updated_error",CREDIT_CARD_VERIFIED:"credit_card_verified",CREDIT_CARD_VERIFIED_ERROR:"credit_card_verified_error",PAYMENT_METHODS_UPDATED:"payment_methods_updated",PAYMENT_METHODS_UPDATED_ERROR:"payment_methods_updated_error",TRANSFERS_UPDATED:"transfers_updated",TRANSFERS_UPDATED_ERROR:"transfers_updated_error",NUX_TRANSFERS_UPDATED:"nux_transfers_updated",TRANSFER_ADDED:"transfer_added",TRANSFER_ADDED_ERROR:"transfer_added_error",TRANSFER_UPDATED:"transfer_updated",TRANSFER_UPDATED_ERROR:"transfer_updated_error",TRANSFER_ACCEPTED:"transfer_accepted",TRANSFER_DECLINED:"transfer_declined",CHAT_SEND_VIEW_OPENED:"chat_send_view_opened",CHAT_SEND_VIEW_CLOSED:"chat_send_view_closed",BIN_NUMBER_VALIDATED:"bin_number_validated",BIN_NUMBER_VALIDATED_ERROR:"bin_number_validated_error",USER_ELIGIBILITY_UDPATED:"user_eligibility_updated",FRIENDS_LIST_UPDATED:"friends_list_updated",DIALOG_SHOWN:"dialog_shown",DIALOG_CLOSED:"dialog_closed",BANNER_STATES_UPDATED:"banner_states_updated",BANNER_DISMISSED:"banner_dismissed",BANNER_VIEWED:"banner_viewed",BANNER_COMPLETED:"banner_completed",MONEYPENNY_TRANSFER_CREATED:"moneypenny_transfer_created",MONEYPENNY_TRANSFER_CREATED_ERROR:"moneypenny_transfer_created_error",PLATFORM_CONTEXT_ADDED:"platform_context_added",PLATFORM_CONTEXT_ADDED_ERROR:"platform_context_added_error",PLATFORM_CONTEXT_SAVE_ERRORS_CLEARED:"platform_context_save_errors_cleared",PLATFORM_CONTEXT_BANNER_DISMISSED:"platform_context_banner_dismissed",PLATFORM_CONTEXT_PRODUCT_ITEM_SOLD:"platform_context_product_item_sold",PLATFORM_CONTEXT_CHANGED:"platform_context_changed",EXTENSIVE_TRANSFER_DETAILS_UPDATED:"extensive_transfer_details_updated",ADDRESS_SAVING:"address_saving",ADDRESSES_UPDATED:"addresses_updated",ADDRESS_ADDED:"address_added",ADDRESS_ADDED_ERROR:"address_added_error",ADDRESS_ADDED_ERROR_CLEARED:"address_added_error_cleared",CHECKOUT_CART_INITIATED:"checkout_cart_initiated",CHECKOUT_CART_CREATED:"checkout_cart_created",CHECKOUT_SHIPPING_OPTION_SELECTED:"checkout_shipping_option_selected",CHECKOUT_ADDRESS_SELECTED:"checkout_address_selected",CHECKOUT_CREDIT_CARD_SELECTED:"checkout_credit_card_selected",CHECKOUT_ADDRESS_FORM_TOGGLED:"checkout_address_form_toggled",CHECKOUT_CREDIT_CARD_FORM_TOGGLED:"checkout_credit_card_form_toggled",CHECKOUT_ADDRESS_EDIT_OPTIONS_TOGGLED:"checkout_address_options_toggled",CHECKOUT_CREDIT_CARD_EDIT_OPTIONS_TOGGLED:"checkout_credit_card_edit_options_toggled",CHECKOUT_PAYMENT_METHOD_EDIT_OPTIONS_TOGGLED:"checkout_payment_edit_options_toggled",CHECKOUT_PAYMENT_METHOD_SELECTED:"checkout_payment_method_selected",CHECKOUT_PAYMENT_METHOD_CONFIGURED:"checkout_payment_method_configured",CHECKOUT_PAYMENT_METHOD_CONFIRMED:"checkout_payment_method_confirmed",CHECKOUT_ADDRESS_FORM_VALIDATED:"checkout_address_form_validated",CHECKOUT_CREDIT_CARD_FORM_VALIDATED:"checkout_credit_card_form_validated",CHECKOUT_EDIT_COMPLETED:"checkout_completed",CHECKOUT_PROCESSING:"checkout_processing",CHECKOUT_BUYER_PROFILE_UPDATED:"checkout_buyer_profile_updated",CHECKOUT_MANUAL_PAYMENT_RECEIPT_UPDATED:"checkout_manual_payment_receipt_updated",PAYMENT_REQUEST_INITIATED:"payment_request_initiated",PAYMENT_REQUEST_INITIATED_COMPLETE:"payment_request_initiated_completed",PAYMENT_REQUEST_CREATED:"payment_request_created",PAYMENT_REQUEST_CREATED_ERROR:"payment_request_created_error",PAYMENT_REQUEST_UPDATED:"payment_request_updated",PAYMENT_REQUEST_DECLINE_INITIATED:"payment_request_decline_initiated",PAYMENT_REQUEST_DECLINED:"payment_request_declined",PAYMENT_REQUEST_DECLINE_ERROR:"payment_request_decline_error",PAYMENT_REQUESTS_FETCHED:"payment_requests_fetched",PAYMENT_REQUEST_CANCEL_INITIATED:"payment_request_cancel_initiated",PAYMENT_REQUEST_CANCELED:"payment_request_canceled",PAYMENT_REQUEST_CANCEL_ERROR:"payment_request_cancel_error"});e.exports=a}),null);
__d("P2PDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;c=babelHelpers.inherits(a,b("ExplicitRegistrationReactDispatcher"));g=c&&c.prototype;function a(a){g.constructor.call(this,a),this.dispatch=this.dispatch.bind(this)}e.exports=new a({strict:!1})}),null);
__d("shallowEqual",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=Object.prototype.hasOwnProperty;function h(a,b){if(a===b)return a!==0||b!==0||1/a===1/b;else return a!==a&&b!==b}function a(a,b){__p&&__p();if(h(a,b))return!0;if(typeof a!=="object"||a===null||typeof b!=="object"||b===null)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(var d=0;d<c.length;d++)if(!g.call(b,c[d])||!h(a[c[d]],b[c[d]]))return!1;return!0}e.exports=a}),null);
__d("FluxContainerInstrumentation",["invariant"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=null;function i(a,b,c){c=c||b;var d=!1;if(typeof b.getDependencyStores==="function"){var e=b.getDependencyStores();for(var f=0;f<e.length;f++)e[f].hasChanged()&&(d=d||i(a,e[f],c))}d||(a.push(b.__moduleID||"unnamed_store"),d=!0);return d}var j={updateTracking:null,inject:function(a){h==null||g(0,1394),h=a,a.updateTracking&&(j.updateTracking=a.updateTracking)},hasInstrumentation:function(){return Boolean(h)},onInit:function(a){h&&h.init(a)},onCalculateStateStart:function(a){return h?h.calculateStateStart(a):null},onDidUpdate:function(a,b,c,d,e,f){h&&h.didUpdate(a,b,c,d,e,f)},addStoreDependencies:i};e.exports=j}),null);
__d("FluxStoreGroup",["invariant"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a,b,c){this.__dispatcher=h(a);var d=a.map(function(a){return a.getDispatchToken()});this.$1=this.__dispatcher.register(function(a){this.__dispatcher.waitFor(d),b()}.bind(this),c,null,c);this.__dispatcher.explicitlyRegisterStore&&this.__dispatcher.explicitlyRegisterStore(this)}a.prototype.release=function(){this.__dispatcher.unregister(this.$1)};a.prototype.getDispatchToken=function(){return this.$1};function h(a){a&&a.length||g(0,5731);a=a[0].getDispatcher();return a}e.exports=a}),null);
__d("FluxContainerNameUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){if(a&&b)try{Object.defineProperty(a,"name",{value:b})}catch(a){}return a}e.exports={nameContainer:a}}),null);
__d("FluxContainerSubscriptions",["FluxStoreGroup"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,b){if(a===b)return!0;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}function a(a,b){this.$1=[],this.$5=a||this.constructor.name,this.$6=b}a.prototype.setStores=function(a){__p&&__p();if(this.$4&&g(this.$4,a))return;this.$4=a;this.$7();this.$8();var c=!1,d=[];if(this.$6)this.$3=a.map(function(a){return a.addListener(function(){c=!0,this.$6!=null&&this.$6(a)}.bind(this))}.bind(this));else{var e=function(){c=!0};this.$3=a.map(function(a){return a.addListener(e)})}d=function(){c&&(this.$1.forEach(function(a){return a()}),c=!1)}.bind(this);this.$2=new(b("FluxStoreGroup"))(a,d,this.$5)};a.prototype.addListener=function(a){this.$1.push(a)};a.prototype.reset=function(){this.$7(),this.$8(),this.$9(),this.$10()};a.prototype.$7=function(){this.$3&&(this.$3.forEach(function(a){return a.remove()}),this.$3=null)};a.prototype.$8=function(){this.$2&&(this.$2.release(),this.$2=null)};a.prototype.$10=function(){this.$4=null};a.prototype.$9=function(){this.$1=[]};e.exports=a}),null);
__d("getModuleNameFromFluxContainer",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){if(a==null)return null;var b=a.match(/.* \[from (.*?)\]/);if(!b)return a;a=b[1];b=a.indexOf(".");return b>0?a.substr(0,b):a}e.exports=a}),null);
__d("FluxContainer",["FluxContainerInstrumentation","FluxContainerNameUtils","FluxContainerSubscriptions","React","getModuleNameFromFluxContainer","shallowEqual","warning"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").Component,h=b("React").PureComponent,i={pure:!0,pureProps:!1,withProps:!1,withContext:!1};function j(a,c){__p&&__p();var d=babelHelpers["extends"]({},i,c||{}),e,f,g=d.name,j=function(){g=g||b("getModuleNameFromFluxContainer")(f?f.displayName||f.name:null)||"FluxContainer(unknown)";return g},l=function(c,e,f){e=d.withProps?e:undefined;f=d.withContext?f:undefined;var g=b("FluxContainerInstrumentation").onCalculateStateStart(j());c=a.calculateState(c,e,f);g&&g();return c},m=function(b,c){b=d.withProps?b:undefined;c=d.withContext?c:undefined;return a.getStores(b,c)};e=function(){__p&&__p();var c,e;c=babelHelpers.inherits(g,a);e=c&&c.prototype;function g(a,c){"use strict";__p&&__p();e.constructor.call(this,a,c);this.$BasicContainer2=null;f||(f=this.constructor);this.$BasicContainer1=new(b("FluxContainerSubscriptions"))(f.displayName||f.name,b("FluxContainerInstrumentation").hasInstrumentation()?function(a){b("FluxContainerInstrumentation").updateTracking&&b("FluxContainerInstrumentation").updateTracking.shouldRecord()&&(this.$BasicContainer2=this.$BasicContainer2||[],b("FluxContainerInstrumentation").addStoreDependencies(this.$BasicContainer2,a))}.bind(this):null);this.$BasicContainer1.setStores(m(a,c));this.$BasicContainer1.addListener(function(){var a=this.$BasicContainer2;this.$BasicContainer2=null;var d=b("FluxContainerInstrumentation").updateTracking&&b("FluxContainerInstrumentation").updateTracking.getCurrentDispatch();this.setState(function(e,f){b("FluxContainerInstrumentation").updateTracking&&b("FluxContainerInstrumentation").updateTracking.storeEmitChange(this,j(),a||[],d);return l(e,f,c)}.bind(this))}.bind(this));a=l(undefined,a,c);b("FluxContainerInstrumentation").updateTracking&&b("FluxContainerInstrumentation").updateTracking.initialState(this,j());this.state=babelHelpers["extends"]({},this.state||{},a)}g.prototype.UNSAFE_componentWillReceiveProps=function(a,c){"use strict";__p&&__p();e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps.call(this,a,c);var f=!d.withProps||d.pureProps&&b("shallowEqual")(a,this.props),g=!d.withContext||d.pureProps&&b("shallowEqual")(c,this.context);if(g&&f)return;this.$BasicContainer1.setStores(m(a,c));var h=b("FluxContainerInstrumentation").updateTracking&&b("FluxContainerInstrumentation").updateTracking.getCurrentDispatch();this.setState(function(d){b("FluxContainerInstrumentation").updateTracking&&b("FluxContainerInstrumentation").updateTracking.receiveProps(this,j(),h);return l(d,a,c)}.bind(this))};g.prototype.componentWillUnmount=function(){"use strict";e.componentWillUnmount&&e.componentWillUnmount.call(this),this.$BasicContainer1.reset()};return g}();e=d.pure&&!(a.prototype instanceof h)?k(e):e;if(b("FluxContainerInstrumentation").hasInstrumentation()){var n=!1;e=function(){__p&&__p();var a,c;a=babelHelpers.inherits(d,e);c=a&&a.prototype;function d(a,d){"use strict";c.constructor.call(this,a,d),n||(b("FluxContainerInstrumentation").onInit(this.constructor),n=!0)}d.prototype.componentDidUpdate=function(a,d){"use strict";c.componentDidUpdate&&c.componentDidUpdate.call(this,a,d),b("FluxContainerInstrumentation").onDidUpdate(this,j(),a,this.props,d,this.state)};return d}()}b("FluxContainerNameUtils").nameContainer(e,d.name||a.displayName||a.name);return e}function k(c){__p&&__p();var d;c=babelHelpers.inherits(a,c);d=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,e=new Array(c),f=0;f<c;f++)e[f]=arguments[f];return b=(a=d.constructor).call.apply(a,[this].concat(e)),this.isPureFluxContainer=!0,b}a.prototype.shouldComponentUpdate=function(a,c){"use strict";return!b("shallowEqual")(this.props,a)||!b("shallowEqual")(this.state,c)};return a}function a(a,b,c,d){__p&&__p();var e;e=babelHelpers.inherits(f,g);e&&e.prototype;f.getStores=function(a,c){"use strict";return b(a,c)};f.calculateState=function(a,b,d){"use strict";return c(a,b,d)};f.prototype.render=function(){"use strict";return a(this.state)};function f(){"use strict";e.apply(this,arguments)}return j(f,d)}e.exports={create:j,createFunctional:a}}),null);
__d("MercurySingletonProvider",["CurrentUser"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1={},this.$2=a}a.prototype.getForFBID=function(a){this.$1[a]||(this.$1[a]=new this.$2(a));return this.$1[a]};a.prototype.get=function(){return this.getForFBID(b("CurrentUser").getID())};a.mock=function(a){throw new Error("MercurySingletonProvider.mock() must only be used in tests.")};e.exports=a}),null);